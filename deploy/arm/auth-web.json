{
  "comments": "Auth Web App",
  "name": "[variables('authAppName')]",
  "type": "Microsoft.Web/sites",
  "kind": "app,linux,container",
  "location": "[resourceGroup().location]",
  "properties": {
    "enabled": true,
    "hostNameSslStates": [
      {
        "name": "[concat(variables('authAppName'),'.azurewebsites.net')]",
        "sslState": "Disabled",
        "virtualIP": null,
        "thumbprint": null,
        "toUpdate": null,
        "hostType": "Standard"
      },
      {
        "name": "[concat(variables('authAppName'),'.scm.azurewebsites.net')]",
        "sslState": "Disabled",
        "virtualIP": null,
        "thumbprint": null,
        "toUpdate": null,
        "hostType": "Repository"
      }
    ],
    "serverFarmId": "[resourceId('Microsoft.Web/serverfarms',parameters('appServicePlanName'))]",
    "reserved": true,
    "siteConfig": {
      "linuxFxVersion": "[concat('DOCKER|', parameters('containerRegistry'), '/', parameters('authImageName'), ':latest')]"
    },
    "appSettings": [{
        "CORS_WHITELIST": "[concat('https://', variables('pupilAppUrl'))]"
      },
      {
        "AZURE_STORAGE_CONNECTION_STRING": "[parameters('AZURE_STORAGE_CONNECTION_STRING')]"
      },
      {
        "WEBSITES_ENABLE_APP_SERVICE_STORAGE": "false"
      },
      {
        "DOCKER_ENABLE_CI": "true"
      }
    ],
    "kind": "app,linux,container",
    "hostingEnvironmentId": null,
    "tags": {},
    "httpsOnly": true
  }
}
