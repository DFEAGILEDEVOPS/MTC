dist: xenial
os: linux
language: node_js
services:
  - docker
node_js:
  - 10.16.3
env:
  global:
    - secure: "Og8cCGyALz4Il0cw5MzwIwsf9w/2MNMERk60hIjIpmoYEnsl+LwtcGmWNkfgCaF4WIPPSGZX8AnB29s8aJgnDMdtdinbAm6KIWQ7IZtYWma7+A5HWTn/2UcXOR3SMkD60sIlcvMlgWYBK64W0cda4LDxhqqS5r7mXCW+kcZv/ijsEGLXZ4yIlzmNJqK4eRXN/B/ywRMY3FX7opgbQzmld74tZ2EAjF35QR6S6+0r4cIyi0begWr2bOOSRDQ2OqscQlI6vaX2eJscvJdMcx+I7n5HfKLcgvG/rHTprxguaXf8/bfYRPfzFOfRfQB8B/eUwLORPau0nXKqtSCMFd0FVy6ONRxKZQR3yI+LM3HoWY706SYWUwpPolz3VB5hat7xjFCHsmDwXGmUwcNK07QjI26iZ8QNJzhsP2EHHNShSbzg3O8Pi4lNxL0r44icLm5Fzb7QfGmP9xnrdyHUF8tDKTqdg6PCkvMBajhIrVv9j2eWU7zT6V0XWUgaFxJzF/QI2mJmlTOm+CTYOGHc6RCc8LHIZT00snXYTPwCN1amEKkuYIDJmvtVk7c1sOrVV52D0g3gUarbmKaHdC76xDVUbf7ygSE4VcOu8e+VsmaSMhs3HH1fCfM2EZOY9ZrvP/VjcB/lmnP5CQeC6ji7esjPj+u9KaAAgxiCNJGkdqJCsYY="
  - IMAGE=admin
  - IMAGE=admin-assets
  - IMAGE=pupil-spa
  - IMAGE=pupil-api
before_install:
  - node ./deploy/should-it-build.js $TRAVIS_PULL_REQUEST
  - cd admin-assets
  - ./copy-assets.sh
  - cd ..
script:
  - cd $IMAGE
  - docker build .
after_script:
  - docker images
