language: node_js

env:
  global:
    - STD_LOG_FILE="./build.log"
    - CXX=g++-4.8
    - GOOGLE_SVC_DOC_KEY=17V1vMudgvkJ4YMmR3SzdC7zEfYuy5l7Si2stAjR2GBo

node_js: 
  - 8.1.0

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8

services: mongodb

sudo: false

before_install:
  - $CXX --version
  - rvm install 2.3.3

install: true

script: 
  - sh -c 'cd pupil && npm install && npm test && cd ../admin && npm install && npm test'
#  - sh -c 'gem install bundler && cd admin/test && bundle install'
  - ./admin/test.sh
  - ./pupil/test.sh

