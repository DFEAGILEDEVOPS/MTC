<%- partial('partials/_gds_breadcrumbs_and_sign_out', { breadcrumbs }) %>
<main class="govuk-main-wrapper" id="main-content" role="main">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <% if (error.hasError()) { %>
      <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1"
        data-module="govuk-error-summary">
        <h2 class="govuk-error-summary__title" id="error-summary-title">
          You need to fix the errors on this page before continuing.
        </h2>
        <div class="govuk-error-summary__body">
          <p>See highlighted errors below.</p>
          <ul class="govuk-list govuk-error-summary__list">
            <% error.getUniqueFields(['pupil-autocomplete-container', 'accessArrangementsList', 'inputAssistanceInformation', 'nextButtonInformation', 'questionReaderReasonsList', 'questionReaderOtherInformation']).map(f => { %>
            <li><a href="#<%= f %>"><%= error.get(f) %></a></li>
            <% }) %>
          </ul>
        </div>
      </div>
      <% } %>
      <h1 class="govuk-heading-xl"><%= pageTitle %></h1>
      <%- partial('partials/_gds_session_expiry') %>
      <form id="submitAccessArrangements" method="post" action="/access-arrangements/?" autocomplete="off">
        <input type="hidden" name="_csrf" value="<%= csrftoken %>" />
          <div id="selectAccessArrangementsPupil"
            class="govuk-form-group <%= error.isError('pupil-autocomplete-container') ? 'govuk-form-group--error' : '' %>">
            <h2 class="govuk-heading-l">1. Search for pupil name</h2>
            <div id="pupilFormControl" class="govuk-body govuk-!-width-one-half">
              <span class="govuk-error-message"><%= error.get('pupil-autocomplete-container') %></span>
              <select class="govuk-select" name="pupilUrlSlug" id="pupil-autocomplete-container">
                <option value="">Select a pupil</option>
                <% pupils.map(p => { %>
                <option value="<%= p.urlSlug %>" <%= p.urlSlug === formData['pupilUrlSlug'] && 'selected' %>>
                  <%= p.fullName %></option>
                <% }) %>
              </select>
            </div>
          </div>
          <button type="submit" id="save-input-assistant" class="govuk-button govuk-!-margin-right-2">Save</button>
          <a href="/access-arrangements/select-access-arrangements" role="button" draggable="false"
            class="govuk-button govuk-button--secondary" data-module="govuk-button">
            Cancel
          </a>
      </form>
      <div class="govuk-back-to-top">
        <a class="govuk-link govuk-link--no-visited-state app-back-to-top__link" href="#top">
          <svg role="presentation" focusable="false" class="app-back-to-top__icon" xmlns="http://www.w3.org/2000/svg"
            width="13" height="17" viewBox="0 0 13 17">
            <path fill="currentColor" d="M6.5 0L0 6.5 1.4 8l4-4v12.7h2V4l4.3 4L13 6.4z"></path>
          </svg>Back to top
        </a>
      </div>
    </div>
  </div>
</main>
