<%
const err = error;
const input = (typeof formData !== 'undefined') ? formData : {};
const heading = 'Edit pupil details';
const submitLabel = 'Save';
const headingClass = 'heading-xlarge';
%>

<%- partial('partials/_breadcrumbs_and_sign_out', { breadcrumbs }) %>

<% if (err.hasError()) { %>
<div class="grid-row">
    <div class="column-two-thirds">
        <div class="error-summary" role="group" aria-labelledby="error-summary-heading-1">
            <h2 class="heading-medium error-summary-heading" id="error-summary-heading-1">Check the pupilâ€™s details</h2>
            <p>You need to fix the errors on this page before continuing. See highlighted errors below.</p>
            <ul class="error-summary-list">
                <% err.getUniqueFields(['foreName', 'middleNames', 'lastName', 'upn', 'dob-day', 'dob-month', 'dob-year', 'gender']).map(f => { %>
                <% const errors = err.get(f) %>
                <% if (Array.isArray(errors)) { %>
                <%  errors.map(e => { %>
                <li><a href="#<%= f %>"><%= e %></a></li>
                <% }) } else { %>
                <li><a href="#<%= f %>"><%= errors %></a></li>
                <% } %>
              <% }) %>
            </ul>
        </div>
    </div>
</div>
<% } %>

<header class="page-header">
    <h1 class="heading-xlarge">Edit pupil details</h1>
</header>

<%- partial('partials/_session_expiry') %>

<%- partial('school/_pupil-form', {
    input: input,
    err: err,
    formData: input,
    heading: heading,
    submitLabel: submitLabel,
    headingClass: headingClass,
    formHeader: 'Edit',
    pupilExampleYear: pupilExampleYear
}) %>
