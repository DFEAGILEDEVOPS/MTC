<div class="grid-row">
    <div class="column-one-half">
        <%- partial('partials/_breadcrumbs', { breadcrumbs: breadcrumbs }) %>
    </div>
    <div class="column-one-half">
        <%- partial('partials/_name_and_sign_out') %>
    </div>
</div>

<div class="grid-row">
    <div class="column-two-thirds">
        <header class="page-header">
            <h1 class="heading-xlarge">Generate pupil PINs</h1>
        </header>
    </div>
</div>

<div class="grid-row">
    <div class="column-two-thirds">
        <div class="govuk-box-highlight">
            <div class="font-medium">
                <strong class="bold">
                    Pupil PINs and school password generated
                </strong>
                <br>
                Valid only until 4pm, <%= date %>
            </div>
        </div>
    </div>
</div>

<div class="grid-row">
    <div class="column-two-thirds">
        Please distribute pupil Personal Identification Numbers (PINs) and school password to your pupils.
    </div>
</div>
<br />

<div class="grid-row">
    <div class="column-two-thirds">
        <div>
            <div class="icon-file-download pupils-template"></div>
                <b><a class="template-link" href="#">Download all pupil PINs and school password</a></b>
        </div>
        <br>
        <div>
            <div class="icon-file-download pupils-template"></div>
            <b><a class="template-link" href="#">Create custom download</a></b>
        </div>
    </div>
</div>
<br />

<div class="grid-row">
    <div class="column-two-thirds">
        <form action="/school/generate-pins-list/lastName/asc" name="generate-pins-list">
            <div class="form-group">
                <div class="form-buttons">
                    <input type="submit" class="button-secondary" value="Generate more PINs"/>
                </div>
            </div>
        </form>
        <% if (!!school) { %>
        <b><%= school.name %>'s password for the day:</b>
        <br>
        <span id="school-pin"><%= school.schoolPin %></span>
        <% } else { %>
        No active password
        <% } %>
    </div>
</div>

<div class="grid-row">
    <div class="column-two-thirds">
        <% if (pupils && pupils.length > 0) { %>
        <table class="spacious sorting" id="generatePins" role="listbox" aria-label="Select pupils.">
            <thead>
            <tr>
                <th scope="col">
                    Pupil
                </th>
                <th scope="col">
                    Pupil PIN
                </th>
            </tr>
            </thead>
            <tbody>
            <% pupils.forEach( (pupil) => { %>
            <tr>
                <td>
                    <label for="pupil-<%= pupil._id %>">
                        <%= pupil.lastName %>, <%= pupil.foreName %> <%= pupil.middleNames %>
                    </label>
                    <% if (pupil.showDoB) { %>
                    <div class="font-greyed-out font-xsmall">
                        Date of birth: <%= pupil.dob %>
                    </div>
                    <% } %>
                </td>
                <td>
                    <label for="pupil-<%= pupil._id %>">
                        <%= pupil.pin %>
                    </label>
                </td>
            </tr>
            <% }) %>
            </tbody>
        </table>
        <div class="back-to-top-container">
            <a href="#top">Back to top</a>
        </div>
        <% } %>
    </div>
</div>
