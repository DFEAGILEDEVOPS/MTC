pupil pin controller->checkWindowV2Service: getActiveCheckWindow()
checkWindowV2Service->checkWindowDataService: sqlFindActiveCheckWindow()
checkWindowDataService->sqlService: query()
sqlService->SQLDB: SELECT()
pupil pin controller->businessAvailabilityService: determinePinGenerationEligibility()
businessAvailabilityService->businessAvailabilityService: isPinGenerationAllowed()
pupil pin controller->schoolDataService: sqlFindOneById()
schoolDataService->sqlService: query()
sqlService->SQLDB: SELECT()
pupil pin controller->pinGenerationService: generateSchoolPassword()
pinGenerationService->pinValidator: isActivePin()
pinGenerationService->pinGenerationService: generateCryptoRandomNumber()
pupil pin controller->schoolDataService: sqlUpdate()
schoolDataService->sqlService: modify()
sqlService->SQLDB: SELECT()
pupil pin controller->checkStartService: prepareCheck2()
checkStartService->pinGenerationV2Service: getPupilsEligibleForPinGenerationById()
pinGenerationV2Service->pinGenerationDataService: sqlFindPupilsEligibleForPinGenerationById()
pinGenerationDataService->sqlService: query()
sqlService->SQLDB: SELECT()
checkStartService->setValidationService: validate()
checkStartService->checkWindowDataService: sqlFindOneCurrent()
checkWindowDataService->checkWindowDataService: sqlFindCurrent()
checkWindowDataService->sqlService: query()
sqlService->SQLDB: SELECT()
checkStartService->checkFormService: getAllFormsForCheckWindowByType()
checkFormService->checkFormDataService: sqlFetchSortedActiveFormsByName()
checkFormDataService->sqlService: query()
sqlService->SQLDB: SELECT()
checkStartService->checkDataService: sqlFindAllFormsUsedByPupils()
checkDataService->sqlService: query()
sqlService->SQLDB: SELECT()
checkStartService->checkStartService: initialisePupilCheck()
checkStartService->checkFormService: allocateCheckForm()
checkStartService->pinGenerationService: getPinExpiryTime()
checkStartService->pinGenerationDataService: sqlFindChecksForPupilsByIds()
pinGenerationDataService->sqlService: query()
sqlService->SQLDB: SELECT()
checkStartService->pinGenerationV2Service: checkAndUpdateRestarts()
pinGenerationV2Service->pinGenerationDataService: sqlFindChecksForPupilsById()
pinGenerationDataService->sqlService: query()
sqlService->SQLDB: SELECT()
pinGenerationV2Service->pinGenerationDataService: updatePupilRestartsWithCheckInformation()
pinGenerationDataService->sqlService: modify()
sqlService->SQLDB: UPDATE()
checkStartService->azureQueueService: addMessageAsync(pupilStatus Queue)
checkStartService->checkStartService: prepareCheckQueueMessages()
checkStartService->checkFormAllocationDataService: sqlFindByIdsHydrated()
checkFormAllocationDataService->sqlService: query()
checkStartService->sasTokenService: generateSasToken()
sasTokenService->azureQueueService: generateSharedAccessSignature()
checkStartService->sasTokenService: generateSasToken()
sasTokenService->azureQueueService: generateSharedAccessSignature()
checkStartService->sasTokenService: generateSasToken()
sasTokenService->azureQueueService: generateSharedAccessSignature()
checkStartService->sasTokenService: generateSasToken()
sasTokenService->azureQueueService: generateSharedAccessSignature()
checkStartService->azureQueueService: addMessageAsync(prepareCheck Queue)

