!function(){var e={445:function(){"use strict";void 0!==typeof Symbol&&Symbol.asyncIterator||(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"))},80:function(e,t,r){"use strict";r.r(t),r.d(t,{AnonymousCredential:function(){return U},AnonymousCredentialPolicy:function(){return j},BaseRequestPolicy:function(){return H},Credential:function(){return Q},CredentialPolicy:function(){return $},HttpHeaders:function(){return ge},Pipeline:function(){return Is},QueueClient:function(){return Ri},QueueSASPermissions:function(){return vi},QueueServiceClient:function(){return _i},RequestPolicyOptions:function(){return k},RestError:function(){return A},StorageBrowserPolicy:function(){return Ss},StorageBrowserPolicyFactory:function(){return bs},StorageOAuthScopes:function(){return Pr},StorageRetryPolicy:function(){return qs},StorageRetryPolicyFactory:function(){return Es},StorageRetryPolicyType:function(){return ws},WebResource:function(){return xe},deserializationPolicy:function(){return me},logger:function(){return wr},newPipeline:function(){return Ts}});var s={};r.r(s),r.d(s,{AccessPolicy:function(){return Xs},CorsRule:function(){return Ls},DequeuedMessageItem:function(){return Js},EnqueuedMessage:function(){return Zs},GeoReplication:function(){return Fs},ListQueuesSegmentResponse:function(){return Gs},Logging:function(){return js},MessageIdDeleteExceptionHeaders:function(){return Tn},MessageIdDeleteHeaders:function(){return In},MessageIdUpdateExceptionHeaders:function(){return zn},MessageIdUpdateHeaders:function(){return Mn},MessagesClearExceptionHeaders:function(){return Pn},MessagesClearHeaders:function(){return Rn},MessagesDequeueExceptionHeaders:function(){return wn},MessagesDequeueHeaders:function(){return bn},MessagesEnqueueExceptionHeaders:function(){return En},MessagesEnqueueHeaders:function(){return qn},MessagesPeekExceptionHeaders:function(){return Cn},MessagesPeekHeaders:function(){return On},Metrics:function(){return Us},PeekedMessageItem:function(){return en},QueueCreateExceptionHeaders:function(){return mn},QueueCreateHeaders:function(){return ln},QueueDeleteExceptionHeaders:function(){return pn},QueueDeleteHeaders:function(){return dn},QueueGetAccessPolicyExceptionHeaders:function(){return Nn},QueueGetAccessPolicyHeaders:function(){return xn},QueueGetPropertiesExceptionHeaders:function(){return fn},QueueGetPropertiesHeaders:function(){return hn},QueueItem:function(){return Ws},QueueMessage:function(){return Ys},QueueServiceProperties:function(){return $s},QueueServiceStatistics:function(){return Vs},QueueSetAccessPolicyExceptionHeaders:function(){return Sn},QueueSetAccessPolicyHeaders:function(){return vn},QueueSetMetadataExceptionHeaders:function(){return gn},QueueSetMetadataHeaders:function(){return yn},RetentionPolicy:function(){return Qs},ServiceGetPropertiesExceptionHeaders:function(){return nn},ServiceGetPropertiesHeaders:function(){return sn},ServiceGetStatisticsExceptionHeaders:function(){return on},ServiceGetStatisticsHeaders:function(){return an},ServiceListQueuesSegmentExceptionHeaders:function(){return cn},ServiceListQueuesSegmentHeaders:function(){return un},ServiceSetPropertiesExceptionHeaders:function(){return rn},ServiceSetPropertiesHeaders:function(){return tn},SignedIdentifier:function(){return Ks},StorageError:function(){return Bs}});const n="$",i="_";var a,o=new Uint8Array(16);function u(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}for(var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&c.test(e)},m=[],d=0;d<256;++d)m.push((d+256).toString(16).substr(1));var p=function(e,t,r){var s=(e=e||{}).random||(e.rng||u)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=s[n];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase();if(!l(r))throw TypeError("Stringified UUID is invalid");return r}(s)};const h=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,f="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function y(){return p()}const g=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function x(e,t,r){return e&&t?e.split(t).join(r||""):e}class N{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(e,t){const r=t;if(e)if(null!=r){const t=Array.isArray(r)?r:r.toString();this._rawQuery[e]=t}else delete this._rawQuery[e]}get(e){return e?this._rawQuery[e]:void 0}toString(){let e="";for(const t in this._rawQuery){e&&(e+="&");const r=this._rawQuery[t];if(Array.isArray(r)){const s=[];for(const e of r)s.push(`${t}=${e}`);e+=s.join("&")}else e+=`${t}=${r}`}return e}static parse(e){const t=new N;if(e){e.startsWith("?")&&(e=e.substring(1));let r="ParameterName",s="",n="";for(let i=0;i<e.length;++i){const a=e[i];switch(r){case"ParameterName":switch(a){case"=":r="ParameterValue";break;case"&":s="",n="";break;default:s+=a}break;case"ParameterValue":"&"===a?(t.set(s,n),s="",n="",r="ParameterName"):n+=a;break;default:throw new Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(s,n)}return t}}class v{setScheme(e){e?this.set(e,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")}getPort(){return this._port}setPath(e){if(e){const t=e.indexOf("://");if(-1!==t){const r=e.lastIndexOf("/",t);this.set(-1===r?e:e.substr(r+1),"SCHEME")}else this.set(e,"PATH")}else this._path=void 0}appendPath(e){if(e){let t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}}getPath(){return this._path}setQuery(e){this._query=e?N.parse(e):void 0}setQueryParameter(e,t){e&&(this._query||(this._query=new N),this._query.set(e,t))}getQueryParameterValue(e){return this._query?this._query.get(e):void 0}getQuery(){return this._query?this._query.toString():void 0}set(e,t){const r=new b(e,t);for(;r.next();){const e=r.current();let t;if(e)switch(e.type){case"SCHEME":this._scheme=e.text||void 0;break;case"HOST":this._host=e.text||void 0;break;case"PORT":this._port=e.text||void 0;break;case"PATH":t=e.text||void 0,this._path&&"/"!==this._path&&"/"===t||(this._path=t);break;case"QUERY":this._query=N.parse(e.text);break;default:throw new Error(`Unrecognized URLTokenType: ${e.type}`)}}}toString(){let e="";return this._scheme&&(e+=`${this._scheme}://`),this._host&&(e+=this._host),this._port&&(e+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+=`?${this._query.toString()}`),e}replaceAll(e,t){e&&(this.setScheme(x(this.getScheme(),e,t)),this.setHost(x(this.getHost(),e,t)),this.setPort(x(this.getPort(),e,t)),this.setPath(x(this.getPath(),e,t)),this.setQuery(x(this.getQuery(),e,t)))}static parse(e){const t=new v;return t.set(e,"SCHEME_OR_HOST"),t}}class S{constructor(e,t){this.text=e,this.type=t}static scheme(e){return new S(e,"SCHEME")}static host(e){return new S(e,"HOST")}static port(e){return new S(e,"PORT")}static path(e){return new S(e,"PATH")}static query(e){return new S(e,"QUERY")}}class b{constructor(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(w(this))switch(this._currentState){case"SCHEME":!function(e){const t=function(e){return E(e,(e=>function(e){const t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)))}(e);e._currentToken=S.scheme(t),w(e)?e._currentState="HOST":e._currentState="DONE"}(this);break;case"SCHEME_OR_HOST":!function(e){const t=O(e,":","/","?");w(e)?":"===R(e)?"://"===q(e,3)?(e._currentToken=S.scheme(t),e._currentState="HOST"):(e._currentToken=S.host(t),e._currentState="PORT"):(e._currentToken=S.host(t),"/"===R(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=S.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===q(e,3)&&P(e,3);const t=O(e,":","/","?");e._currentToken=S.host(t),w(e)?":"===R(e)?e._currentState="PORT":"/"===R(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===R(e)&&P(e);const t=O(e,"/","?");e._currentToken=S.port(t),w(e)?"/"===R(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){const t=O(e,"?");e._currentToken=S.path(t),w(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===R(e)&&P(e);const t=function(e){let t="";return e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength),t}(e);e._currentToken=S.query(t),e._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function w(e){return e._currentIndex<e._textLength}function R(e){return e._text[e._currentIndex]}function P(e,t){w(e)&&(t||(t=1),e._currentIndex+=t)}function q(e,t){let r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function E(e,t){let r="";for(;w(e);){const s=R(e);if(!t(s))break;r+=s,P(e)}return r}function O(e,...t){return E(e,(e=>-1===t.indexOf(e)))}const C="REDACTED",M=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],z=["api-version"];class I{constructor({allowedHeaderNames:e=[],allowedQueryParameters:t=[]}={}){e=Array.isArray(e)?M.concat(e):M,t=Array.isArray(t)?z.concat(t):z,this.allowedHeaderNames=new Set(e.map((e=>e.toLowerCase()))),this.allowedQueryParameters=new Set(t.map((e=>e.toLowerCase())))}sanitize(e){const t=new Set;return JSON.stringify(e,((e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("_headersMap"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||!("object"!=typeof(s=r)||null===s||Array.isArray(s)||s instanceof RegExp||s instanceof Date)){if(t.has(r))return"[Circular]";t.add(r)}var s;return r}}),2)}sanitizeHeaders(e){return this.sanitizeObject(e,this.allowedHeaderNames,((e,t)=>e[t].value))}sanitizeQuery(e){return this.sanitizeObject(e,this.allowedQueryParameters,((e,t)=>e[t]))}sanitizeObject(e,t,r){if("object"!=typeof e||null===e)return e;const s={};for(const n of Object.keys(e))t.has(n.toLowerCase())?s[n]=r(e,n):s[n]=C;return s}sanitizeUrl(e){if("string"!=typeof e||null===e)return e;const t=v.parse(e),r=t.getQuery();if(!r)return e;const s=N.parse(r);for(const e of s.keys())this.allowedQueryParameters.has(e.toLowerCase())||s.set(e,C);return t.setQuery(s.toString()),t.toString()}}const T={},_=new I;class A extends Error{constructor(e,t,r,s,n){super(e),this.name="RestError",this.code=t,this.statusCode=r,this.request=s,this.response=n,Object.setPrototypeOf(this,A.prototype)}[T](){return`RestError: ${this.message} \n ${_.sanitize(this)}`}}var D;A.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",A.PARSE_ERROR="PARSE_ERROR",function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(D||(D={}));class H{constructor(e,t){this._nextPolicy=e,this._options=t}shouldLog(e){return this._options.shouldLog(e)}log(e,t){this._options.log(e,t)}}class k{constructor(e){this._logger=e}shouldLog(e){return!!this._logger&&e!==D.OFF&&e<=this._logger.minimumLogLevel}log(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)}}class $ extends H{sendRequest(e){return this._nextPolicy.sendRequest(this.signRequest(e))}signRequest(e){return e}}class j extends ${constructor(e,t){super(e,t)}}class Q{create(e,t){throw new Error("Method should be implemented in children classes.")}}class U extends Q{create(e,t){return new j(e,t)}}function L(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function B(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}class V{constructor(e={},t){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,r){const s=(e,s)=>{throw new Error(`"${r}" with value "${t}" should satisfy the constraint "${e}": ${s}.`)};if(e.constraints&&null!=t){const r=t,{ExclusiveMaximum:n,ExclusiveMinimum:i,InclusiveMaximum:a,InclusiveMinimum:o,MaxItems:u,MaxLength:c,MinItems:l,MinLength:m,MultipleOf:d,Pattern:p,UniqueItems:h}=e.constraints;null!=n&&r>=n&&s("ExclusiveMaximum",n),null!=i&&r<=i&&s("ExclusiveMinimum",i),null!=a&&r>a&&s("InclusiveMaximum",a),null!=o&&r<o&&s("InclusiveMinimum",o);const f=t;if(null!=u&&f.length>u&&s("MaxItems",u),null!=c&&f.length>c&&s("MaxLength",c),null!=l&&f.length<l&&s("MinItems",l),null!=m&&f.length<m&&s("MinLength",m),null!=d&&r%d!=0&&s("MultipleOf",d),p){const e="string"==typeof p?new RegExp(p):p;"string"==typeof t&&null!==t.match(e)||s("Pattern",p)}h&&f.some(((e,t,r)=>r.indexOf(e)!==t))&&s("UniqueItems",h)}}serialize(e,t,r,s={}){var a,o,u;const c={rootName:null!==(a=s.rootName)&&void 0!==a?a:"",includeRoot:null!==(o=s.includeRoot)&&void 0!==o&&o,xmlCharKey:null!==(u=s.xmlCharKey)&&void 0!==u?u:i};let l={};const m=e.type.name;r||(r=e.serializedName),null!==m.match(/^Sequence$/i)&&(l=[]),e.isConstant&&(t=e.defaultValue);const{required:d,nullable:p}=e;if(d&&p&&void 0===t)throw new Error(`${r} cannot be undefined.`);if(d&&!p&&null==t)throw new Error(`${r} cannot be null or undefined.`);if(!d&&!1===p&&null===t)throw new Error(`${r} cannot be null.`);return null==t?l=t:(this.validateConstraints(e,t,r),null!==m.match(/^any$/i)?l=t:null!==m.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?l=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw new Error(`${t} with value ${r} must be of type number.`)}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw new Error(`${t} with value "${r}" must be of type string.`)}else if(null!==e.match(/^Uuid$/i)){if("string"!=typeof r.valueOf()||(s=r,!h.test(s)))throw new Error(`${t} with value "${r}" must be of type string and a valid uuid.`)}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw new Error(`${t} with value ${r} must be of type boolean.`)}else if(null!==e.match(/^Stream$/i)){const e=typeof r;if(!("string"===e||"function"===e||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob))throw new Error(`${t} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}var s;return r}(m,r,t):null!==m.match(/^Enum$/i)?l=function(e,t,r){if(!t)throw new Error(`Please provide a set of allowedValues to validate ${e} as an Enum Type.`);if(!t.some((e=>"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r)))throw new Error(`${r} is not a valid value for ${e}. The valid values are: ${JSON.stringify(t)}.`);return r}(r,e.type.allowedValues,t):null!==m.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?l=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in ISO8601 format.`);t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123 format.`);t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(`${r} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function(e){return g.test(e)}(t))throw new Error(`${r} must be a string in ISO 8601 format. Instead was "${t}".`);return t}(m,t,r):null!==m.match(/^ByteArray$/i)?l=function(e,t){let r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);r=L(t)}return r}(r,t):null!==m.match(/^Base64Url$/i)?l=function(e,t){let r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(`${e} must be of type Uint8Array.`);r=function(e){if(e){if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){let r=e.length;for(;r-1>=0&&"="===e[r-1];)--r;return e.substr(0,r)}(L(e)).replace(/\+/g,"-").replace(/\//g,"_")}}(t)||""}return r}(r,t):null!==m.match(/^Sequence$/i)?l=function(e,t,r,s,i,a){if(!Array.isArray(r))throw new Error(`${s} must be of type Array.`);const o=t.type.element;if(!o||"object"!=typeof o)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}.`);const u=[];for(let t=0;t<r.length;t++){const c=e.serialize(o,r[t],s,a);if(i&&o.xmlNamespace){const e=o.xmlNamespacePrefix?`xmlns:${o.xmlNamespacePrefix}`:"xmlns";"Composite"===o.type.name?(u[t]=Object.assign({},c),u[t][n]={[e]:o.xmlNamespace}):(u[t]={},u[t][a.xmlCharKey]=c,u[t][n]={[e]:o.xmlNamespace})}else u[t]=c}return u}(this,e,t,r,Boolean(this.isXML),c):null!==m.match(/^Dictionary$/i)?l=function(e,t,r,s,i,a){if("object"!=typeof r)throw new Error(`${s} must be of type object.`);const o=t.type.value;if(!o||"object"!=typeof o)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}.`);const u={};for(const t of Object.keys(r)){const n=e.serialize(o,r[t],s,a);u[t]=K(o,n,i,a)}if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns",r=u;return r[n]={[e]:t.xmlNamespace},r}return u}(this,e,t,r,Boolean(this.isXML),c):null!==m.match(/^Composite$/i)&&(l=function(e,t,r,s,i,a){if(Y(e,t)&&(t=J(e,t,r,"clientName")),null!=r){const o={},u=W(e,t,s);for(const c of Object.keys(u)){const l=u[c];if(l.readOnly)continue;let m,d=o;if(e.isXML)m=l.xmlIsWrapped?l.xmlName:l.xmlElementName||l.xmlName;else{const e=F(l.serializedName);m=e.pop();for(const t of e)null!=d[t]||null==r[c]&&void 0===l.defaultValue||(d[t]={}),d=d[t]}if(null!=d){if(i&&t.xmlNamespace){const e=t.xmlNamespacePrefix?`xmlns:${t.xmlNamespacePrefix}`:"xmlns";d[n]=Object.assign(Object.assign({},d[n]),{[e]:t.xmlNamespace})}const o=""!==l.serializedName?s+"."+l.serializedName:s;let u=r[c];const p=Y(e,t);p&&p.clientName===c&&null==u&&(u=t.serializedName);const h=e.serialize(l,u,o,a);if(void 0!==h&&null!=m){const e=K(l,h,i,a);i&&l.xmlIsAttribute?(d[n]=d[n]||{},d[n][m]=h):i&&l.xmlIsWrapped?d[m]={[l.xmlElementName]:e}:d[m]=e}}}const c=function(e,t,r){const s=t.type.additionalProperties;if(!s&&t.type.className){const s=G(e,t,r);return null==s?void 0:s.type.additionalProperties}return s}(e,t,s);if(c){const t=Object.keys(u);for(const n in r)t.every((e=>e!==n))&&(o[n]=e.serialize(c,r[n],s+'["'+n+'"]',a))}return o}return r}(this,e,t,r,Boolean(this.isXML),c))),l}deserialize(e,t,r,s={}){var a,o,u;const c={rootName:null!==(a=s.rootName)&&void 0!==a?a:"",includeRoot:null!==(o=s.includeRoot)&&void 0!==o&&o,xmlCharKey:null!==(u=s.xmlCharKey)&&void 0!==u?u:i};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;let l;const m=e.type.name;if(r||(r=e.serializedName),null!==m.match(/^Composite$/i))l=function(e,t,r,s,i){var a;Y(e,t)&&(t=J(e,t,r,"serializedName"));const o=W(e,t,s);let u={};const c=[];for(const l of Object.keys(o)){const m=o[l],d=F(o[l].serializedName);c.push(d[0]);const{serializedName:p,xmlName:h,xmlElementName:f}=m;let y=s;""!==p&&void 0!==p&&(y=s+"."+p);const g=m.headerCollectionPrefix;if(g){const t={};for(const s of Object.keys(r))s.startsWith(g)&&(t[s.substring(g.length)]=e.deserialize(m.type.value,r[s],y,i)),c.push(s);u[l]=t}else if(e.isXML)if(m.xmlIsAttribute&&r[n])u[l]=e.deserialize(m,r[n][h],y,i);else{const t=f||h||p;if(m.xmlIsWrapped){const t=r[h],s=null!==(a=null==t?void 0:t[f])&&void 0!==a?a:[];u[l]=e.deserialize(m,s,y,i)}else{const s=r[t];u[l]=e.deserialize(m,s,y,i)}}else{let s,n=r;for(const e of d){if(!n)break;n=n[e]}s=n;const a=t.type.polymorphicDiscriminator;let c;if(a&&l===a.clientName&&null==s&&(s=t.serializedName),Array.isArray(r[l])&&""===o[l].serializedName){s=r[l];const t=e.deserialize(m,s,y,i);for(const[e,r]of Object.entries(u))Object.prototype.hasOwnProperty.call(t,e)||(t[e]=r);u=t}else void 0===s&&void 0===m.defaultValue||(c=e.deserialize(m,s,y,i),u[l]=c)}}const l=t.type.additionalProperties;if(l){const t=e=>{for(const t in o)if(F(o[t].serializedName)[0]===e)return!1;return!0};for(const n in r)t(n)&&(u[n]=e.deserialize(l,r[n],s+'["'+n+'"]',i))}else if(r)for(const e of Object.keys(r))void 0!==u[e]||c.includes(e)||X(e,i)||(u[e]=r[e]);return u}(this,e,t,r,c);else{if(this.isXML){const e=c.xmlCharKey,r=t;null!=r[n]&&null!=r[e]&&(t=r[e])}null!==m.match(/^Number$/i)?(l=parseFloat(t),isNaN(l)&&(l=t)):null!==m.match(/^Boolean$/i)?l="true"===t||"false"!==t&&t:null!==m.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?l=t:null!==m.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?l=new Date(t):null!==m.match(/^UnixTime$/i)?l=function(e){if(e)return new Date(1e3*e)}(t):null!==m.match(/^ByteArray$/i)?l=B(t):null!==m.match(/^Base64Url$/i)?l=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return B(e=e.replace(/-/g,"+").replace(/_/g,"/"))}}(t):null!==m.match(/^Sequence$/i)?l=function(e,t,r,s,n){const i=t.type.element;if(!i||"object"!=typeof i)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}`);if(r){Array.isArray(r)||(r=[r]);const t=[];for(let a=0;a<r.length;a++)t[a]=e.deserialize(i,r[a],`${s}[${a}]`,n);return t}return r}(this,e,t,r,c):null!==m.match(/^Dictionary$/i)&&(l=function(e,t,r,s,n){const i=t.type.value;if(!i||"object"!=typeof i)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}`);if(r){const t={};for(const a of Object.keys(r))t[a]=e.deserialize(i,r[a],s,n);return t}return r}(this,e,t,r,c))}return e.isConstant&&(l=e.defaultValue),l}}function F(e){const t=[];let r="";if(e){const s=e.split(".");for(const e of s)"\\"===e.charAt(e.length-1)?r+=e.substr(0,e.length-1)+".":(r+=e,t.push(r),r="")}return t}function G(e,t,r){const s=t.type.className;if(!s)throw new Error(`Class name for model "${r}" is not provided in the mapper "${JSON.stringify(t,void 0,2)}".`);return e.modelMappers[s]}function W(e,t,r){let s=t.type.modelProperties;if(!s){const n=G(e,t,r);if(!n)throw new Error(`mapper() cannot be null or undefined for model "${t.type.className}".`);if(s=null==n?void 0:n.type.modelProperties,!s)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(n)}" of type "${t.type.className}" for object "${r}".`)}return s}function K(e,t,r,s){if(!r||!e.xmlNamespace)return t;const i={[e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns"]:e.xmlNamespace};if(["Composite"].includes(e.type.name)){if(t[n])return t;{const e=Object.assign({},t);return e[n]=i,e}}const a={};return a[s.xmlCharKey]=t,a[n]=i,a}function X(e,t){return[n,t.xmlCharKey].includes(e)}function J(e,t,r,s){const n=Y(e,t);if(n){const i=n[s];if(null!=i){const s=r[i];if(null!=s){const r=t.type.uberParent||t.type.className,n=s===r?s:r+"."+s,i=e.modelMappers.discriminators[n];i&&(t=i)}}}return t}function Y(e,t){return t.type.polymorphicDiscriminator||Z(e,t.type.uberParent)||Z(e,t.type.className)}function Z(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}const ee=function(e){const t={};for(const e of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])t[e]=e;return t}();if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');let te,re,se,ne;function ie(){return te||(te=document.implementation.createDocument(null,null,null)),te}function ae(){return re||(re=new DOMParser),re}function oe(e,t){let r={};const s=e.childNodes.length,i=e.childNodes[0],a=i&&1===s&&i.nodeType===Node.TEXT_NODE&&i.nodeValue||void 0,o=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(o){r[n]={};for(let e=0;e<o.attributes.length;e++){const t=o.attributes[e];r[n][t.nodeName]=t.nodeValue}a&&(r[t.xmlCharKey]=a)}else 0===s?r="":a&&(r=a);if(!a)for(let n=0;n<s;n++){const s=e.childNodes[n];if(s.nodeType!==Node.TEXT_NODE){const e=oe(s,t);r[s.nodeName]?Array.isArray(r[s.nodeName])?r[s.nodeName].push(e):r[s.nodeName]=[r[s.nodeName],e]:r[s.nodeName]=e}}return r}function ue(e,t={}){var r,s,n;const a={rootName:null!==(r=t.rootName)&&void 0!==r?r:"root",includeRoot:null!==(s=t.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(n=t.xmlCharKey)&&void 0!==n?n:i},o=le(e,a.rootName,a)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(se||(se=new XMLSerializer),se).serializeToString(o)}function ce(e){const t=[];for(const r of Object.keys(e)){const s=ie().createAttribute(r);s.value=e[r].toString(),t.push(s)}return t}function le(e,t,r){if(null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e){const r=ie().createElement(t);return r.textContent=null==e?"":e.toString(),[r]}if(Array.isArray(e)){const s=[];for(const n of e)for(const e of le(n,t,r))s.push(e);return s}if("object"==typeof e){const s=ie().createElement(t);for(const t of Object.keys(e))if(t===n)for(const r of ce(e[t]))s.attributes.setNamedItem(r);else if(t===r.xmlCharKey)s.textContent=e[t].toString();else for(const n of le(e[t],t,r))s.appendChild(n);return[s]}throw new Error(`Illegal value passed to buildObject: ${e}`)}function me(e,t){return{create:(r,s)=>new he(r,s,e,t)}}const de=["application/json","text/json"],pe=["application/xml","application/atom+xml"];class he extends H{constructor(e,t,r,s={}){var n;super(e,t),this.jsonContentTypes=r&&r.json||de,this.xmlContentTypes=r&&r.xml||pe,this.xmlCharKey=null!==(n=s.xmlCharKey)&&void 0!==n?n:i}async sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>function(e,t,r,s={}){var n,a,o;const u={rootName:null!==(n=s.rootName)&&void 0!==n?n:"",includeRoot:null!==(a=s.includeRoot)&&void 0!==a&&a,xmlCharKey:null!==(o=s.xmlCharKey)&&void 0!==o?o:i};return function(e,t,r,s){var n;const a=e=>{const t=`Error "${e}" occurred while parsing the response body - ${r.bodyAsText}.`,s=e.code||A.PARSE_ERROR,n=new A(t,s,r.status,r.request,r);return Promise.reject(n)};if(!(null===(n=r.request.streamResponseStatusCodes)||void 0===n?void 0:n.has(r.status))&&!r.request.streamResponseBody&&r.bodyAsText){const n=r.bodyAsText,o=r.headers.get("Content-Type")||"",u=o?o.split(";").map((e=>e.toLowerCase())):[];if(0===u.length||u.some((t=>-1!==e.indexOf(t))))return new Promise((e=>{r.parsedBody=JSON.parse(n),e(r)})).catch(a);if(u.some((e=>-1!==t.indexOf(e))))return function(e,t={}){var r,s,n;try{const a={rootName:null!==(r=t.rootName)&&void 0!==r?r:"",includeRoot:null!==(s=t.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(n=t.xmlCharKey)&&void 0!==n?n:i},o=ae().parseFromString(e,"application/xml");let u;return function(e){const t=e.getElementsByTagName("parsererror");if(t.length>0&&function(){var e;if(void 0===ne)try{ne=null!==(e=ae().parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==e?e:""}catch(e){ne=""}return ne}())for(let e=0;e<t.length;e++)if(t[e].namespaceURI===ne)throw new Error(t[e].innerHTML)}(o),u=a.includeRoot?oe(o,a):oe(o.childNodes[0],a),Promise.resolve(u)}catch(e){return Promise.reject(e)}}(n,s).then((e=>(r.parsedBody=e,r))).catch(a)}return Promise.resolve(r)}(e,t,r,u).then((e=>{if(!function(e){const t=e.request.shouldDeserialize;let r;return r=void 0===t||("boolean"==typeof t?t:t(e)),r}(e))return e;const t=e.request.operationSpec;if(!t||!t.responses)return e;const n=function(e){let t;const r=e.request,s=r.operationSpec;if(s){const n=r.operationResponseGetter;t=n?n(s,e):s.responses[e.status]}return t}(e),{error:i,shouldReturnResponse:a}=function(e,t,r){var s;const n=200<=e.status&&e.status<300;if(function(e){const t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?n:r){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}const i=null!=r?r:t.responses.default,a=(null===(s=e.request.streamResponseStatusCodes)||void 0===s?void 0:s.has(e.status))||e.request.streamResponseBody?`Unexpected status code: ${e.status}`:e.bodyAsText,o=new A(a,void 0,e.status,e.request,e);if(!i)throw o;const u=i.bodyMapper,c=i.headersMapper;try{if(e.parsedBody){const r=e.parsedBody;let s;if(u){let e=r;t.isXML&&u.type.name===ee.Sequence&&(e="object"==typeof r?r[u.xmlElementName]:[]),s=t.serializer.deserialize(u,e,"error.response.parsedBody")}const n=r.error||s||r;o.code=n.code,n.message&&(o.message=n.message),u&&(o.response.parsedBody=s)}e.headers&&c&&(o.response.parsedHeaders=t.serializer.deserialize(c,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(t){o.message=`Error "${t.message}" occurred in deserializing the responseBody - "${e.bodyAsText}" for the default response.`}return{error:o,shouldReturnResponse:!1}}(e,t,n);if(i)throw i;if(a)return e;if(n){if(n.bodyMapper){let r=e.parsedBody;t.isXML&&n.bodyMapper.type.name===ee.Sequence&&(r="object"==typeof r?r[n.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(n.bodyMapper,r,"operationRes.parsedBody",s)}catch(t){throw new A(`Error ${t} occurred in deserializing the responseBody - ${e.bodyAsText}`,void 0,e.status,e.request,e)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);n.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(n.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders",s))}return e}))}(this.jsonContentTypes,this.xmlContentTypes,e,{xmlCharKey:this.xmlCharKey})))}}function fe(e){return e.toLowerCase()}function ye(e){if(e&&"object"==typeof e){const t=e;if("function"==typeof t.rawHeaders&&"function"==typeof t.clone&&"function"==typeof t.get&&"function"==typeof t.set&&"function"==typeof t.contains&&"function"==typeof t.remove&&"function"==typeof t.headersArray&&"function"==typeof t.headerValues&&"function"==typeof t.headerNames&&"function"==typeof t.toJson)return!0}return!1}class ge{constructor(e){if(this._headersMap={},e)for(const t in e)this.set(t,e[t])}set(e,t){this._headersMap[fe(e)]={name:e,value:t.toString()}}get(e){const t=this._headersMap[fe(e)];return t?t.value:void 0}contains(e){return!!this._headersMap[fe(e)]}remove(e){const t=this.contains(e);return delete this._headersMap[fe(e)],t}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const e=[];for(const t in this._headersMap)e.push(this._headersMap[t]);return e}headerNames(){const e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].name);return e}headerValues(){const e=[],t=this.headersArray();for(let r=0;r<t.length;++r)e.push(t[r].value);return e}toJson(e={}){const t={};if(e.preserveCase)for(const e in this._headersMap){const r=this._headersMap[e];t[r.name]=r.value}else for(const e in this._headersMap){const r=this._headersMap[e];t[fe(r.name)]=r.value}return t}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const e={};for(const t in this._headersMap){const r=this._headersMap[t];e[r.name]=r.value}return new ge(e)}}class xe{constructor(e,t,r,s,n,i,a,o,u,c,l,m,d,p,h){this.streamResponseBody=i,this.streamResponseStatusCodes=h,this.url=e||"",this.method=t||"GET",this.headers=ye(n)?n:new ge(n),this.body=r,this.query=s,this.formData=void 0,this.withCredentials=a||!1,this.abortSignal=o,this.timeout=u||0,this.onUploadProgress=c,this.onDownloadProgress=l,this.proxySettings=m,this.keepAlive=d,this.decompressResponse=p,this.requestId=this.headers.get("x-ms-client-request-id")||y()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(e){if(!e)throw new Error("options object is required");if(void 0===e.method||null===e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(void 0!==e.pathTemplate&&null!==e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||void 0!==e.url&&null!==e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){const t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){const{pathTemplate:t,pathParameters:r}=e;if("string"!=typeof t)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");const s=e.baseUrl;let n=s+(s.endsWith("/")?"":"/")+(t.startsWith("/")?t.slice(1):t);const i=n.match(/({[\w-]*\s*[\w-]*})/gi);if(i&&i.length){if(!r)throw new Error(`pathTemplate: ${t} has been provided. Hence, options.pathParameters must also be provided.`);i.forEach((function(e){const s=e.slice(1,-1),i=r[s];if(null==i||"string"!=typeof i&&"object"!=typeof i){const e=JSON.stringify(r,void 0,2);throw new Error(`pathTemplate: ${t} contains the path parameter ${s} however, it is not present in parameters: ${e}.The value of the path parameter can either be a "string" of the form { ${s}: "some sample value" } or it can be an "object" of the form { "${s}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof i.valueOf()&&(n=n.replace(e,encodeURIComponent(i))),"object"==typeof i.valueOf()){if(!i.value)throw new Error(`options.pathParameters[${s}] is of type "object" but it does not contain a "value" property.`);n=i.skipUrlEncoding?n.replace(e,i.value):n.replace(e,encodeURIComponent(i.value))}}))}this.url=n}if(e.queryParameters){const t=e.queryParameters;if("object"!=typeof t)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const r=[];this.query={};for(const e in t){const s=t[e];if(s)if("string"==typeof s)r.push(e+"="+encodeURIComponent(s)),this.query[e]=encodeURIComponent(s);else if("object"==typeof s){if(!s.value)throw new Error(`options.queryParameters[${e}] is of type "object" but it does not contain a "value" property.`);s.skipUrlEncoding?(r.push(e+"="+s.value),this.query[e]=s.value):(r.push(e+"="+encodeURIComponent(s.value)),this.query[e]=encodeURIComponent(s.value))}}this.url+=r.join("&")}if(e.headers){const t=e.headers;for(const r of Object.keys(e.headers))this.headers.set(r,t[r])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,void 0!==e.body&&null!==e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new V(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),e.tracingContext&&(this.tracingContext=e.tracingContext),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this}clone(){const e=new xe(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e}}var Ne="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof r.g?r.g:{},ve="1.1.0",Se=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,be=function(e){var t=new Set([e]),r=new Set,s=e.match(Se);if(!s)return function(){return!1};var n=+s[1],i=+s[2],a=+s[3];if(null!=s[4])return function(t){return t===e};function o(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var s=e.match(Se);if(!s)return o(e);var c=+s[1],l=+s[2],m=+s[3];return null!=s[4]||n!==c?o(e):0===n?i===l&&a<=m?u(e):o(e):i<=l?u(e):o(e)}}(ve),we=ve.split(".")[0],Re=Symbol.for("opentelemetry.js.api."+we),Pe=Ne;function qe(e,t,r,s){var n;void 0===s&&(s=!1);var i=Pe[Re]=null!==(n=Pe[Re])&&void 0!==n?n:{version:ve};if(!s&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}return i.version!==ve?(a=new Error("@opentelemetry/api: All API registration versions must match"),r.error(a.stack||a.message),!1):(i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v1.1.0."),!0)}function Ee(e){var t,r,s=null===(t=Pe[Re])||void 0===t?void 0:t.version;if(s&&be(s))return null===(r=Pe[Re])||void 0===r?void 0:r[e]}function Oe(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v1.1.0.");var r=Pe[Re];r&&delete r[e]}var Ce,Me=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ze("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ze("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ze("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ze("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ze("verbose",this._namespace,e)},e}();function ze(e,t,r){var s=Ee("diag");if(s)return r.unshift(t),s[e].apply(s,r)}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(Ce||(Ce={}));var Ie=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=Ee("diag");if(s)return s[e].apply(s,t)}}var t=this;t.setLogger=function(e,r){var s,n;if(void 0===r&&(r=Ce.INFO),e===t){var i=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(s=i.stack)&&void 0!==s?s:i.message),!1}var a=Ee("diag"),o=function(e,t){function r(r,s){var n=t[r];return"function"==typeof n&&e>=s?n.bind(t):function(){}}return e<Ce.NONE?e=Ce.NONE:e>Ce.ALL&&(e=Ce.ALL),t=t||{},{error:r("error",Ce.ERROR),warn:r("warn",Ce.WARN),info:r("info",Ce.INFO),debug:r("debug",Ce.DEBUG),verbose:r("verbose",Ce.VERBOSE)}}(r,e);if(a){var u=null!==(n=(new Error).stack)&&void 0!==n?n:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),o.warn("Current logger will overwrite one already registered from "+u)}return qe("diag",o,t,!0)},t.disable=function(){Oe("diag",t)},t.createComponentLogger=function(e){return new Me(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Te=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var s=new e(this._entries);return s._entries.set(t,r),s},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var s=new e(this._entries),n=0,i=t;n<i.length;n++){var a=i[n];s._entries.delete(a)}return s},e.prototype.clear=function(){return new e},e}();function _e(e){return void 0===e&&(e={}),new Te(new Map(Object.entries(e)))}Symbol("BaggageEntryMetadata"),Ie.instance();var Ae={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},De={set:function(e,t,r){null!=e&&(e[t]=r)}};function He(e){return Symbol.for(e)}var ke,$e=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,s){var n=new e(r._currentContext);return n._currentContext.set(t,s),n},r.deleteValue=function(t){var s=new e(r._currentContext);return s._currentContext.delete(t),s}},je=function(e,t){for(var r=0,s=t.length,n=e.length;r<s;r++,n++)e[n]=t[r];return e},Qe=function(){function e(){}return e.prototype.active=function(){return $e},e.prototype.with=function(e,t,r){for(var s=[],n=3;n<arguments.length;n++)s[n-3]=arguments[n];return t.call.apply(t,je([r],s))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Ue=function(e,t){for(var r=0,s=t.length,n=e.length;r<s;r++,n++)e[n]=t[r];return e},Le="context",Be=new Qe,Ve=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return qe(Le,e,Ie.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var s,n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return(s=this._getContextManager()).with.apply(s,Ue([e,t,r],n))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return Ee(Le)||Be},e.prototype.disable=function(){this._getContextManager().disable(),Oe(Le,Ie.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(ke||(ke={}));var Fe="0000000000000000",Ge="00000000000000000000000000000000",We={traceId:Ge,spanId:Fe,traceFlags:ke.NONE},Ke=function(){function e(e){void 0===e&&(e=We),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),Xe=He("OpenTelemetry Context Key SPAN");function Je(e){return e.getValue(Xe)||void 0}function Ye(e,t){return e.setValue(Xe,t)}function Ze(e){return e.deleteValue(Xe)}function et(e,t){return Ye(e,new Ke(t))}function tt(e){var t;return null===(t=Je(e))||void 0===t?void 0:t.spanContext()}var rt=/^([0-9a-f]{32})$/i,st=/^[0-9a-f]{16}$/i;function nt(e){return r=e.traceId,rt.test(r)&&r!==Ge&&(t=e.spanId,st.test(t)&&t!==Fe);var t,r}function it(e){return new Ke(e)}var at,ot,ut,ct=Ve.getInstance(),lt=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(Boolean(null==t?void 0:t.root))return new Ke;var s,n=r&&tt(r);return"object"==typeof(s=n)&&"string"==typeof s.spanId&&"string"==typeof s.traceId&&"number"==typeof s.traceFlags&&nt(n)?new Ke(n):new Ke},e.prototype.startActiveSpan=function(e,t,r,s){var n,i,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(n=t,a=r):(n=t,i=r,a=s);var o=null!=i?i:ct.active(),u=this.startSpan(e,n,o),c=Ye(o,u);return ct.with(c,a,void 0,u)}},e}(),mt=new lt,dt=function(){function e(e,t,r,s){this._provider=e,this.name=t,this.version=r,this.options=s}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,s){var n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):mt},e}(),pt=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new lt},e}()),ht=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var s;return null!==(s=this.getDelegateTracer(e,t,r))&&void 0!==s?s:new dt(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:pt},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var s;return null===(s=this._delegate)||void 0===s?void 0:s.getTracer(e,t,r)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(at||(at={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(ot||(ot={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(ut||(ut={}));var ft=new RegExp("^(?:[a-z][_0-9a-z-*/]{0,255}|[a-z0-9][_0-9a-z-*/]{0,240}@[a-z][_0-9a-z-*/]{0,13})$"),yt=/^[ -~]{0,255}[!-~]$/,gt=/,|=/;!function(){function e(e){this._internalState=new Map,e&&this._parse(e)}e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,r){return t.push(r+"="+e.get(r)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var r=t.trim(),s=r.indexOf("=");if(-1!==s){var n=r.slice(0,s),i=r.slice(s+1,t.length);(function(e){return ft.test(e)})(n)&&function(e){return yt.test(e)&&!gt.test(e)}(i)&&e.set(n,i)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t}}();var xt="trace",Nt=function(){function e(){this._proxyTracerProvider=new ht,this.wrapSpanContext=it,this.isSpanContextValid=nt,this.deleteSpan=Ze,this.getSpan=Je,this.getSpanContext=tt,this.setSpan=Ye,this.setSpanContext=et}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=qe(xt,this._proxyTracerProvider,Ie.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return Ee(xt)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){Oe(xt,Ie.instance()),this._proxyTracerProvider=new ht},e}(),vt=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),St=He("OpenTelemetry Baggage Key");function bt(e){return e.getValue(St)||void 0}function wt(e,t){return e.setValue(St,t)}function Rt(e){return e.deleteValue(St)}var Pt,qt="propagation",Et=new vt,Ot=function(){function e(){this.createBaggage=_e,this.getBaggage=bt,this.setBaggage=wt,this.deleteBaggage=Rt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return qe(qt,e,Ie.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=De),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=Ae),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Oe(qt,Ie.instance())},e.prototype._getGlobalPropagator=function(){return Ee(qt)||Et},e}(),Ct=Ve.getInstance(),Mt=Nt.getInstance();function zt(e,t){return Mt.setSpan(e,t)}Ot.getInstance(),Ie.instance(),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(Pt||(Pt={}));const It=Ct;var Tt;function _t(e){return function(t,r){const s=Mt.getTracer("azure/core-tracing",void 0),n=(null==r?void 0:r.tracingOptions)||{},i=Object.assign({kind:Pt.INTERNAL},n.spanOptions),a=e.packagePrefix?`${e.packagePrefix}.${t}`:t;let o;o=function(){var e;if("undefined"==typeof process)return!1;const t=null===(e=process.env.AZURE_TRACING_DISABLED)||void 0===e?void 0:e.toLowerCase();return"false"!==t&&"0"!==t&&Boolean(t)}()?Mt.wrapSpanContext(We):s.startSpan(a,i,n.tracingContext),e.namespace&&o.setAttribute("az.namespace",e.namespace);let u=n.spanOptions||{};o.isRecording()&&e.namespace&&(u=Object.assign(Object.assign({},n.spanOptions),{attributes:Object.assign(Object.assign({},i.attributes),{"az.namespace":e.namespace})}));const c=Object.assign(Object.assign({},n),{spanOptions:u,tracingContext:zt(n.tracingContext||It.active(),o)});return{span:o,updatedOptions:Object.assign(Object.assign({},r),{tracingOptions:c})}}}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Tt||(Tt={}));const At="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let Dt,Ht=[],kt=[];const $t=[];At&&Qt(At);const jt=Object.assign((e=>Lt(e)),{enable:Qt,enabled:Ut,disable:function(){const e=Dt||"";return Qt(""),e},log:function(...e){if(e.length>0){const t=String(e[0]);t.includes(":error")?console.error(...e):t.includes(":warning")?console.warn(...e):t.includes(":info")?console.info(...e):(t.includes(":verbose"),console.debug(...e))}}});function Qt(e){Dt=e,Ht=[],kt=[];const t=/\*/g,r=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const e of r)e.startsWith("-")?kt.push(new RegExp(`^${e.substr(1)}$`)):Ht.push(new RegExp(`^${e}$`));for(const e of $t)e.enabled=Ut(e.namespace)}function Ut(e){if(e.endsWith("*"))return!0;for(const t of kt)if(t.test(e))return!1;for(const t of Ht)if(t.test(e))return!0;return!1}function Lt(e){const t=Object.assign((function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))}),{enabled:Ut(e),destroy:Bt,log:jt.log,namespace:e,extend:Vt});return $t.push(t),t}function Bt(){const e=$t.indexOf(this);return e>=0&&($t.splice(e,1),!0)}function Vt(e){const t=Lt(`${this.namespace}:${e}`);return t.log=this.log,t}var Ft=jt;const Gt=new Set,Wt="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let Kt;const Xt=Ft("azure");Xt.log=(...e)=>{Ft.log(...e)};const Jt=["verbose","info","warning","error"];Wt&&(sr(Wt)?function(e){if(e&&!sr(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${Jt.join(",")}`);Kt=e;const t=[];for(const e of Gt)rr(e)&&t.push(e.namespace);Ft.enable(t.join(","))}(Wt):console.error(`AZURE_LOG_LEVEL set to unknown log level '${Wt}'; logging is not enabled. Acceptable values: ${Jt.join(", ")}.`));const Yt={verbose:400,info:300,warning:200,error:100};function Zt(e){const t=Xt.extend(e);return er(Xt,t),{error:tr(t,"error"),warning:tr(t,"warning"),info:tr(t,"info"),verbose:tr(t,"verbose")}}function er(e,t){t.log=(...t)=>{e.log(...t)}}function tr(e,t){const r=Object.assign(e.extend(t),{level:t});if(er(e,r),rr(r)){const e=Ft.disable();Ft.enable(e+","+r.namespace)}return Gt.add(r),r}function rr(e){return!!(Kt&&Yt[e.level]<=Yt[Kt])}function sr(e){return Jt.includes(e)}const nr=Zt("core-http"),ir=_t({packagePrefix:"",namespace:""});function ar(e={}){return{create:(t,r)=>new or(t,r,e)}}class or extends H{constructor(e,t,r){super(e,t),this.userAgent=r.userAgent}async sendRequest(e){if(!e.tracingContext)return this._nextPolicy.sendRequest(e);const t=this.tryCreateSpan(e);if(!t)return this._nextPolicy.sendRequest(e);try{const r=await this._nextPolicy.sendRequest(e);return this.tryProcessResponse(t,r),r}catch(e){throw this.tryProcessError(t,e),e}}tryCreateSpan(e){var t;try{const{span:r}=ir(`HTTP ${e.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},e.spanOptions),{kind:Pt.CLIENT}),tracingContext:e.tracingContext}});if(!r.isRecording())return void r.end();const s=null===(t=e.tracingContext)||void 0===t?void 0:t.getValue(Symbol.for("az.namespace"));"string"==typeof s&&r.setAttribute("az.namespace",s),r.setAttributes({"http.method":e.method,"http.url":e.url,requestId:e.requestId}),this.userAgent&&r.setAttribute("http.user_agent",this.userAgent);const n=r.spanContext(),i=function(e){const t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),t.length)return;const r=(e.traceFlags||0).toString(16),s=1===r.length?`0${r}`:r;return`00-${e.traceId}-${e.spanId}-${s}`}(n);if(i&&function(e){return Mt.isSpanContextValid(e)}(n)){e.headers.set("traceparent",i);const t=n.traceState&&n.traceState.serialize();t&&e.headers.set("tracestate",t)}return r}catch(e){return void nr.warning(`Skipping creating a tracing span due to an error: ${e.message}`)}}tryProcessError(e,t){try{e.setStatus({code:Tt.ERROR,message:t.message}),t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){nr.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}tryProcessResponse(e,t){try{e.setAttribute("http.status_code",t.status);const r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),e.setStatus({code:Tt.OK}),e.end()}catch(e){nr.warning(`Skipping tracing span processing due to an error: ${e.message}`)}}}const ur={enable:!0};class cr extends H{constructor(e,t,r){super(e,t),this.keepAliveOptions=r}async sendRequest(e){return e.keepAlive=this.keepAliveOptions.enable,this._nextPolicy.sendRequest(e)}}function lr(e="x-ms-client-request-id"){return{create:(t,r)=>new mr(t,r,e)}}class mr extends H{constructor(e,t,r){super(e,t),this._requestIdHeaderName=r}sendRequest(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,e.requestId),this._nextPolicy.sendRequest(e)}}function dr(e={}){return{create:(t,r)=>new pr(t,r,e)}}class pr extends H{constructor(e,t,{logger:r=nr.info,allowedHeaderNames:s=[],allowedQueryParameters:n=[]}={}){super(e,t),this.logger=r,this.sanitizer=new I({allowedHeaderNames:s,allowedQueryParameters:n})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(e){this.sanitizer.allowedHeaderNames=e}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(e){this.sanitizer.allowedQueryParameters=e}sendRequest(e){return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then((e=>this.logResponse(e)))):this._nextPolicy.sendRequest(e)}logRequest(e){this.logger(`Request: ${this.sanitizer.sanitize(e)}`)}logResponse(e){return this.logger(`Response status code: ${e.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(e.headers)}`),e}}const hr=new Error("ProxyPolicy is not supported in browser environment");function fr(e){return{create:(e,t)=>{throw hr}}}function yr(e){const t=e;return t&&"function"==typeof t.getToken&&(void 0===t.signRequest||t.getToken.length>0)}const gr="authorization",xr="Retry-After";class Nr extends Error{constructor(e){super(e),this.name="AbortError"}}function vr(e,t,r){return new Promise(((s,n)=>{let i,a;const o=()=>n(new Nr((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:"The operation was aborted.")),u=()=>{(null==r?void 0:r.abortSignal)&&a&&r.abortSignal.removeEventListener("abort",a)};if(a=()=>(null!=i&&clearTimeout(i),u(),o()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return o();i=setTimeout((()=>{u(),s(t)}),e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",a)}))}const Sr={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function br(e,t){const r=function(e,t,r){let s=null,n=null;const i=Object.assign(Object.assign({},Sr),r),a={get isRefreshing(){return null!==s},get shouldRefresh(){var e;return!a.isRefreshing&&(null!==(e=null==n?void 0:n.expiresOnTimestamp)&&void 0!==e?e:0)-i.refreshWindowInMs<Date.now()},get mustRefresh(){return null===n||n.expiresOnTimestamp-i.forcedRefreshWindowInMs<Date.now()}};function o(r){var o;return a.isRefreshing||(s=async function(e,t,r){async function s(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let n=await s();for(;null===n;)await vr(t),n=await s();return n}((()=>e.getToken(t,r)),i.retryIntervalInMs,null!==(o=null==n?void 0:n.expiresOnTimestamp)&&void 0!==o?o:Date.now()).then((e=>(s=null,n=e,n))).catch((e=>{throw s=null,n=null,e}))),s}return async e=>a.mustRefresh?o(e):(a.shouldRefresh&&o(e),n)}(e,t);class s extends H{constructor(e,t){super(e,t)}async sendRequest(e){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:t}=await r({abortSignal:e.abortSignal,tracingOptions:{tracingContext:e.tracingContext}});return e.headers.set(gr,`Bearer ${t}`),this._nextPolicy.sendRequest(e)}}return{create:(e,t)=>new s(e,t)}}const wr=Zt("storage-queue"),Rr="2021-06-08",Pr="https://storage.azure.com/.default",qr="_",Er="timeout",Or="User-Agent",Cr=["Access-Control-Allow-Origin","Cache-Control","Content-Length","Content-Type","Date","Request-Id","traceparent","Transfer-Encoding","User-Agent","x-ms-client-request-id","x-ms-date","x-ms-error-code","x-ms-request-id","x-ms-return-client-request-id","x-ms-version","x-ms-approximate-messages-count","x-ms-popreceipt","x-ms-time-next-visible"],Mr=["comp","maxresults","rscc","rscd","rsce","rscl","rsct","se","si","sip","sp","spr","sr","srt","ss","st","sv","include","marker","prefix","messagettl","numofmessages","peekonly","popreceipt","visibilitytimeout"],zr=["GET","HEAD"];class Ir extends H{constructor(e,t,r=20){super(e,t),this.maxRetries=r}sendRequest(e){return this._nextPolicy.sendRequest(e).then((e=>Tr(this,e,0)))}}function Tr(e,t,r){const{request:s,status:n}=t,i=t.headers.get("location");if(i&&(300===n||301===n&&zr.includes(s.method)||302===n&&zr.includes(s.method)||303===n&&"POST"===s.method||307===n)&&(!e.maxRetries||r<e.maxRetries)){const t=v.parse(s.url);return t.setPath(i),s.url=t.toString(),303===n&&(s.method="GET",delete s.body),e._nextPolicy.sendRequest(s).then((t=>Tr(e,t,r+1)))}return Promise.resolve(t)}function _r(e){return"number"==typeof e}function Ar(e,t,r,s,n){return!!t(s,n)&&r.retryCount<e}function Dr(e,t={retryCount:0,retryInterval:0},r){r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;let s=Math.pow(2,t.retryCount-1)-1;return s*=.8*e.retryInterval+Math.floor(Math.random()*(.4*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+s,e.maxRetryInterval),t}var Hr;!function(e){e[e.Exponential=0]="Exponential"}(Hr||(Hr={}));class kr extends H{constructor(e,t,r,s,n){super(e,t),this.retryCount=_r(r)?r:3,this.retryInterval=_r(s)?s:3e4,this.maxRetryInterval=_r(n)?n:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>$r(this,e,t))).catch((t=>$r(this,e,t.response,void 0,t)))}}async function $r(e,t,r,s,n){s=Dr({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},s,n);const i=t.abortSignal&&t.abortSignal.aborted;if(i||!Ar(e.retryCount,(function(e){const t=null==e?void 0:e.status;return!(503===t&&(null==r?void 0:r.headers.get(xr))||void 0===t||t<500&&408!==t||501===t||505===t)}),s,r)){if(i||n||!r)throw s.error||new A("Failed to send the request.",A.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return r}nr.info(`Retrying request in ${s.retryInterval}`);try{await vr(s.retryInterval);const r=await e._nextPolicy.sendRequest(t.clone());return $r(e,t,r,s)}catch(n){return $r(e,t,r,s,n)}}function jr(e){return Qr(e.parameterPath,e.mapper)}function Qr(e,t){let r;return r="string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName,r}const Ur=function(){return"x-ms-useragent"};function Lr(){const e=[{key:"core-http",value:"2.2.5"}],t=function(){const e=self.navigator;return[{key:"OS",value:(e.oscpu||e.platform).replace(" ","")}]}();return function(e,t=" ",r="/"){return e.map((e=>{const t=e.value?`${r}${e.value}`:"";return`${e.key}${t}`})).join(t)}(e.concat(t))}class Br extends H{constructor(e,t,r,s){super(e,t),this._nextPolicy=e,this._options=t,this.headerKey=r,this.headerValue=s}sendRequest(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)}addUserAgentHeader(e){e.headers||(e.headers=new ge),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)}}var Vr;!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(Vr||(Vr={}));class Fr{sendRequest(e){var t;const r=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const s=e.abortSignal;if(s){if(s.aborted)return Promise.reject(new Nr("The operation was aborted."));const e=()=>{r.abort()};s.addEventListener("abort",e),r.addEventListener("readystatechange",(()=>{r.readyState===XMLHttpRequest.DONE&&s.removeEventListener("abort",e)}))}if(Gr(r.upload,e.onUploadProgress),Gr(r,e.onDownloadProgress),e.formData){const t=e.formData,r=new FormData,s=(e,t)=>{t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"options")?r.append(e,t.value,t.options):r.append(e,t)};for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(let t=0;t<r.length;t++)s(e,r[t]);else s(e,r)}e.body=r,e.formData=void 0;const n=e.headers.get("Content-Type");n&&-1!==n.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}r.open(e.method,e.url),r.timeout=e.timeout,r.withCredentials=e.withCredentials;for(const t of e.headers.headersArray())r.setRequestHeader(t.name,t.value);return r.responseType=(null===(t=e.streamResponseStatusCodes)||void 0===t?void 0:t.size)||e.streamResponseBody?"blob":"text",r.send(void 0===e.body?null:e.body),"blob"===r.responseType?new Promise(((t,s)=>{!function(e,t,r,s){e.addEventListener("readystatechange",(()=>{var n;if(e.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(t.streamResponseBody||(null===(n=t.streamResponseStatusCodes)||void 0===n?void 0:n.has(e.status))){const s=new Promise(((r,s)=>{e.addEventListener("load",(()=>{r(e.response)})),Kr(t,e,s)}));r({request:t,status:e.status,headers:Wr(e),blobBody:s})}else e.addEventListener("load",(()=>{if(e.response){const n=new FileReader;n.onload=function(s){var n;const i=null===(n=s.target)||void 0===n?void 0:n.result;r({request:t,status:e.status,headers:Wr(e),bodyAsText:i})},n.onerror=function(e){s(n.error)},n.readAsText(e.response,"UTF-8")}else r({request:t,status:e.status,headers:Wr(e)})}))}))}(r,e,t,s),Kr(e,r,s)})):new Promise((function(t,s){r.addEventListener("load",(()=>t({request:e,status:r.status,headers:Wr(r),bodyAsText:r.responseText}))),Kr(e,r,s)}))}}function Gr(e,t){t&&e.addEventListener("progress",(e=>t({loadedBytes:e.loaded})))}function Wr(e){const t=new ge,r=e.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const e of r){const r=e.indexOf(":"),s=e.slice(0,r),n=e.slice(r+2);t.set(s,n)}return t}function Kr(e,t,r){t.addEventListener("error",(()=>r(new A(`Failed to send request to ${e.url}`,A.REQUEST_SEND_ERROR,void 0,e))));const s=new Nr("The operation was aborted.");t.addEventListener("abort",(()=>r(s))),t.addEventListener("timeout",(()=>r(s)))}let Xr;class Jr extends H{constructor(e,t,r=30){super(e,t),this._retryTimeout=r}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).then((t=>function(e,t,r){if(409===r.status){const s=function(e){let t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){const e=r.error.message.match(/.*'(.*)'/i);e&&(t=e.pop())}}return t}(r.bodyAsText);if(s){const n=function(e){let t;const r=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!r||!r[0])throw new Error(`Unable to extract subscriptionId from the given url - ${e}.`);return t=r[0],t}(t.url);return async function(e,t,r,s){const n=`${t}providers/${r}/register?api-version=2016-02-01`,i=`${t}providers/${r}?api-version=2016-02-01`,a=Yr(s);if(a.method="POST",a.url=n,200!==(await e._nextPolicy.sendRequest(a)).status)throw new Error(`Autoregistration of ${r} failed. Please try registering manually.`);return Zr(e,i,s)}(e,n,s,t).catch((()=>!1)).then((s=>s?(t.headers.set("x-ms-client-request-id",y()),e._nextPolicy.sendRequest(t.clone())):r))}}return Promise.resolve(r)}(this,e,t)))}}function Yr(e,t=!1){const r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",y()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}async function Zr(e,t,r){const s=Yr(r);s.url=t,s.method="GET";const n=await e._nextPolicy.sendRequest(s),i=n.parsedBody;return!(!n.parsedBody||!i.registrationState||"Registered"!==i.registrationState)||(await vr(1e3*e._retryTimeout),Zr(e,t,r))}class es extends H{constructor(e,t,r){super(e,t),this.authenticationProvider=r}signRequest(e){return this.authenticationProvider.signRequest(e)}sendRequest(e){return this.signRequest(e).then((e=>this._nextPolicy.sendRequest(e)))}}class ts extends H{constructor(e,t,r,s,n,i){super(e,t),this.retryCount=_r(r)?r:3,this.retryInterval=_r(s)?s:3e4,this.minRetryInterval=_r(n)?n:3e3,this.maxRetryInterval=_r(i)?i:9e4}sendRequest(e){return this._nextPolicy.sendRequest(e.clone()).catch((t=>rs(this,e,t.response,t)))}}async function rs(e,t,r,s,n){if(n=Dr(e,n,s),!Ar(e.retryCount,(function(e,t){return!(!t||!t.code||"ETIMEDOUT"!==t.code&&"ESOCKETTIMEDOUT"!==t.code&&"ECONNREFUSED"!==t.code&&"ECONNRESET"!==t.code&&"ENOENT"!==t.code)}),n,r,s))return s?Promise.reject(n.error):r;try{return await vr(n.retryInterval),e._nextPolicy.sendRequest(t.clone())}catch(s){return rs(e,t,r,s,n)}}const ss={TooManyRequests:429,ServiceUnavailable:503},ns="The operation was aborted.";class is extends H{constructor(e,t,r){super(e,t),this.numberOfRetries=0,this._handleResponse=r||this._defaultResponseHandler}async sendRequest(e){const t=await this._nextPolicy.sendRequest(e.clone());return t.status!==ss.TooManyRequests&&t.status!==ss.ServiceUnavailable?t:this._handleResponse(e,t)}async _defaultResponseHandler(e,t){var r;const s=t.headers.get(xr);if(s){const t=is.parseRetryAfterHeader(s);if(t){if(this.numberOfRetries+=1,await vr(t,void 0,{abortSignal:e.abortSignal,abortErrorMsg:ns}),null===(r=e.abortSignal)||void 0===r?void 0:r.aborted)throw new Nr(ns);return this.numberOfRetries<3?this.sendRequest(e):this._nextPolicy.sendRequest(e)}}return t}static parseRetryAfterHeader(e){const t=Number(e);return Number.isNaN(t)?is.parseDateRetryAfterHeader(e):1e3*t}static parseDateRetryAfterHeader(e){try{const t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}}}function as(e,t){let r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function os(e,t,r,s){return us(e,t,r.parameterPath,r.mapper,s)}function us(e,t,r,s,n){var i;let a;"string"==typeof r&&(r=[r]);const o=null===(i=t.options)||void 0===i?void 0:i.serializerOptions;if(Array.isArray(r)){if(r.length>0){if(s.isConstant)a=s.defaultValue;else{let n=cs(t,r);n.propertyFound||(n=cs(e,r));let i=!1;n.propertyFound||(i=s.required||"options"===r[0]&&2===r.length),a=i?s.defaultValue:n.propertyValue}const i=Qr(r,s);n.serialize(s,a,i,o)}}else{s.required&&(a={});for(const i in r){const u=s.type.modelProperties[i],c=r[i],l=us(e,t,c,u,n),m=Qr(c,u);n.serialize(u,l,m,o),null!=l&&(a||(a={}),a[i]=l)}}return a}function cs(e,t){const r={propertyFound:!1};let s=0;for(;s<t.length;++s){const r=t[s];if(null==e||!(r in e))break;e=e[r]}return s===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function ls(e,t){const r=e.parsedHeaders,s=t&&t.bodyMapper,n=t=>Object.defineProperty(t,"_response",{value:e});if(s){const t=s.type.name;if("Stream"===t)return n(Object.assign(Object.assign({},r),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));const i="Composite"===t&&s.type.modelProperties||{},a=Object.keys(i).some((e=>""===i[e].serializedName));if("Sequence"===t||a){const t=[...e.parsedBody||[]];for(const r of Object.keys(i))i[r].serializedName&&(t[r]=e.parsedBody[r]);if(r)for(const e of Object.keys(r))t[e]=r[e];return n(t),t}if("Composite"===t||"Dictionary"===t)return n(Object.assign(Object.assign({},r),e.parsedBody))}return s||"HEAD"===e.request.method||"object"!=typeof(i=e.parsedBody)&&"function"!=typeof i||null===i?n(Object.assign(Object.assign({},r),{body:e.parsedBody})):n(Object.assign(Object.assign({},r),e.parsedBody));var i}class ms extends class{constructor(e,t){let r;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||(Xr||(Xr=new Fr),Xr),this._requestPolicyOptions=new k(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))nr.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{let n;if(yr(e)){nr.info("ServiceClient: creating bearer token authentication policy from provided credentials");const r=()=>{let r;const s=this,n=t;return{create(t,i){const a=function(e,t){if(null==e?void 0:e.credentialScopes){const t=e.credentialScopes;return Array.isArray(t)?t.map((e=>new URL(e).toString())):new URL(t).toString()}if(t)return`${t}/.default`}(n,s.baseUri);if(!a)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==r&&(r=br(e,a)),r.create(t,i)}}};n=r()}else if(e&&"function"==typeof e.signRequest)nr.info("ServiceClient: creating signing policy from provided credentials"),s=e,n={create:(e,t)=>new es(e,t,s)};else if(null!=e)throw new Error("The credentials argument must implement the TokenCredential interface");if(nr.info("ServiceClient: using default request policies"),r=function(e,t){const r=[];t.generateClientRequestIdHeader&&r.push(lr(t.clientRequestIdHeaderName)),e&&r.push(e);const s=as(t.userAgentHeaderName,Ur),n=as(t.userAgent,Lr);return s&&n&&r.push(function(e){const t=e&&null!=e.key?e.key:"x-ms-useragent",r=e&&null!=e.value?e.value:Lr();return{create:(e,s)=>new Br(e,s,t,r)}}({key:s,value:n})),r.push(function(e=20){return{create:(t,r)=>new Ir(t,r,e)}}()),r.push(function(e=30){return{create:(t,r)=>new Jr(t,r,e)}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push({create:(e,t)=>new kr(e,t,undefined,undefined,undefined)}),r.push({create:(e,t)=>new ts(e,t,void 0,void 0,void 0,void 0)}),r.push({create:(e,t)=>new is(e,t)})),r.push(me(t.deserializationContentTypes)),f&&r.push(fr(t.proxySettings)),r.push(dr({logger:nr.info})),r}(n,t),t.requestPolicyFactories){const e=t.requestPolicyFactories(r);e&&(r=e)}}var s;this._requestPolicyFactories=r}sendRequest(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");let t;try{!function(e){if(e&&"object"==typeof e){const t=e;if("string"==typeof t.url&&"string"==typeof t.method&&"object"==typeof t.headers&&ye(t.headers)&&"function"==typeof t.validateRequestProperties&&"function"==typeof t.prepare&&"function"==typeof t.clone)return!0}return!1}(e)?(t=new xe,t=t.prepare(e)):(e.validateRequestProperties(),t=e)}catch(e){return Promise.reject(e)}let r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let e=this._requestPolicyFactories.length-1;e>=0;--e)r=this._requestPolicyFactories[e].create(r,this._requestPolicyOptions);return r.sendRequest(t)}async sendOperationRequest(e,t,r){var s;"function"==typeof e.options&&(r=e.options,e.options=void 0);const a=null===(s=e.options)||void 0===s?void 0:s.serializerOptions,o=new xe;let u;try{const r=t.baseUrl||this.baseUri;if(!r)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");o.method=t.httpMethod,o.operationSpec=t;const s=v.parse(r);if(t.path&&s.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(const r of t.urlParameters){let n=os(this,e,r,t.serializer);n=t.serializer.serialize(r.mapper,n,jr(r),a),r.skipEncoding||(n=encodeURIComponent(n)),s.replaceAll(`{${r.mapper.serializedName||jr(r)}}`,n)}if(t.queryParameters&&t.queryParameters.length>0)for(const r of t.queryParameters){let n=os(this,e,r,t.serializer);if(null!=n){if(n=t.serializer.serialize(r.mapper,n,jr(r),a),void 0!==r.collectionFormat&&null!==r.collectionFormat)if(r.collectionFormat===Vr.Multi){if(0===n.length)continue;for(const e in n){const t=n[e];n[e]=null==t?"":t.toString()}}else r.collectionFormat!==Vr.Ssv&&r.collectionFormat!==Vr.Tsv||(n=n.join(r.collectionFormat));if(!r.skipEncoding)if(Array.isArray(n))for(const e in n)void 0!==n[e]&&null!==n[e]&&(n[e]=encodeURIComponent(n[e]));else n=encodeURIComponent(n);void 0!==r.collectionFormat&&null!==r.collectionFormat&&r.collectionFormat!==Vr.Multi&&r.collectionFormat!==Vr.Ssv&&r.collectionFormat!==Vr.Tsv&&(n=n.join(r.collectionFormat)),s.setQueryParameter(r.mapper.serializedName||jr(r),n)}}o.url=s.toString();const c=t.contentType||this.requestContentType;if(c&&t.requestBody&&o.headers.set("Content-Type",c),t.headerParameters)for(const r of t.headerParameters){let s=os(this,e,r,t.serializer);if(null!=s){s=t.serializer.serialize(r.mapper,s,jr(r),a);const e=r.mapper.headerCollectionPrefix;if(e)for(const t of Object.keys(s))o.headers.set(e+t,s[t]);else o.headers.set(r.mapper.serializedName||jr(r),s)}}const l=e.options;if(l){if(l.customHeaders)for(const e in l.customHeaders)o.headers.set(e,l.customHeaders[e]);l.abortSignal&&(o.abortSignal=l.abortSignal),l.timeout&&(o.timeout=l.timeout),l.onUploadProgress&&(o.onUploadProgress=l.onUploadProgress),l.onDownloadProgress&&(o.onDownloadProgress=l.onDownloadProgress),l.spanOptions&&(o.spanOptions=l.spanOptions),l.tracingContext&&(o.tracingContext=l.tracingContext),void 0!==l.shouldDeserialize&&null!==l.shouldDeserialize&&(o.shouldDeserialize=l.shouldDeserialize)}let m,d;o.withCredentials=this._withCredentials,function(e,t,r,s){var a,o,u,c,l,m;const d=null!==(o=null===(a=r.options)||void 0===a?void 0:a.serializerOptions)&&void 0!==o?o:{},p={rootName:null!==(u=d.rootName)&&void 0!==u?u:"",includeRoot:null!==(c=d.includeRoot)&&void 0!==c&&c,xmlCharKey:null!==(l=d.xmlCharKey)&&void 0!==l?l:i},h=d.xmlCharKey;if(s.requestBody&&s.requestBody.mapper){t.body=os(e,r,s.requestBody,s.serializer);const i=s.requestBody.mapper,{required:a,xmlName:o,xmlElementName:u,serializedName:c,xmlNamespace:l,xmlNamespacePrefix:d}=i,f=i.type.name;try{if(void 0!==t.body&&null!==t.body||a){const e=jr(s.requestBody);t.body=s.serializer.serialize(i,t.body,e,p);const r=f===ee.Stream;if(s.isXML){const e=d?`xmlns:${d}`:"xmlns",s=function(e,t,r,s,i){if(e&&!["Composite","Sequence","Dictionary"].includes(r)){const r={};return r[i.xmlCharKey]=s,r[n]={[t]:e},r}return s}(l,e,f,t.body,p);f===ee.Sequence?t.body=ue(function(e,t,r,s){if(Array.isArray(e)||(e=[e]),!r||!s)return{[t]:e};const i={[t]:e};return i[n]={[r]:s},i}(s,u||o||c,e,l),{rootName:o||c,xmlCharKey:h}):r||(t.body=ue(s,{rootName:o||c,xmlCharKey:h}))}else{if(f===ee.String&&((null===(m=s.contentType)||void 0===m?void 0:m.match("text/plain"))||"text"===s.mediaType))return;r||(t.body=JSON.stringify(t.body))}}}catch(e){throw new Error(`Error "${e.message}" occurred in serializing the payload - ${JSON.stringify(c,void 0,"  ")}.`)}}else if(s.formDataParameters&&s.formDataParameters.length>0){t.formData={};for(const n of s.formDataParameters){const i=os(e,r,n,s.serializer);if(null!=i){const e=n.mapper.serializedName||jr(n);t.formData[e]=s.serializer.serialize(n.mapper,i,jr(n),p)}}}}(this,o,e,t),void 0===o.streamResponseStatusCodes&&(o.streamResponseStatusCodes=function(e){const t=new Set;for(const r in e.responses){const s=e.responses[r];s.bodyMapper&&s.bodyMapper.type.name===ee.Stream&&t.add(Number(r))}return t}(t));try{m=await this.sendRequest(o)}catch(e){d=e}d?(d.response&&(d.details=ls(d.response,t.responses[d.statusCode]||t.responses.default)),u=Promise.reject(d)):u=Promise.resolve(ls(m,t.responses[m.status]))}catch(e){u=Promise.reject(e)}const c=r;return c&&u.then((e=>c(null,e._response.parsedBody,e._response.request,e._response))).catch((e=>c(e))),u}}{constructor(e,t){if(void 0===e)throw new Error("'url' cannot be null");if(t||(t={}),!t.userAgent){const e=Lr();t.userAgent=`azure-storage-queue/12.9.0 ${e}`}super(void 0,t),this.requestContentType="application/json; charset=utf-8",this.baseUri=t.endpoint||"{url}",this.url=e,this.version=t.version||"2021-04-10"}}function ds(e,t){const r=v.parse(e);let s=r.getPath();return s=s?s.endsWith("/")?`${s}${t}`:`${s}/${t}`:t,r.setPath(s),r.toString()}function ps(e,t,r){const s=v.parse(e);return s.setQueryParameter(t,r),s.toString()}function hs(e,t){const r=e.split(";");for(const e of r)if(e.trim().startsWith(t))return e.trim().match(t+"=(.*)")[1];return""}function fs(e){let t="";e.startsWith("UseDevelopmentStorage=true")&&(t=function(e){let t="";if(-1!==e.search("DevelopmentStorageProxyUri=")){const r=e.split(";");for(const e of r)e.trim().startsWith("DevelopmentStorageProxyUri=")&&(t=e.trim().match("DevelopmentStorageProxyUri=(.*)")[1])}return t}(e),e="DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;\n  AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;\n  QueueEndpoint=http://127.0.0.1:10001/devstoreaccount1;");let r=hs(e,"QueueEndpoint");if(r=r.endsWith("/")?r.slice(0,-1):r,-1!==e.search("DefaultEndpointsProtocol=")&&-1!==e.search("AccountKey=")){let s="",n="",i=Buffer.from("accountKey","base64"),a="";if(n=hs(e,"AccountName"),i=Buffer.from(hs(e,"AccountKey"),"base64"),!r){s=hs(e,"DefaultEndpointsProtocol");const t=s.toLowerCase();if("https"!==t&&"http"!==t)throw new Error("Invalid DefaultEndpointsProtocol in the provided Connection String. Expecting 'https' or 'http'");if(a=hs(e,"EndpointSuffix"),!a)throw new Error("Invalid EndpointSuffix in the provided Connection String");r=`${s}://${n}.queue.${a}`}if(!n)throw new Error("Invalid AccountName in the provided Connection String");if(0===i.length)throw new Error("Invalid AccountKey in the provided Connection String");return{kind:"AccountConnString",url:r,accountName:n,accountKey:i,proxyUri:t}}{const t=hs(e,"SharedAccessSignature"),s=gs(r);if(!r)throw new Error("Invalid QueueEndpoint in the provided SAS Connection String");if(!t)throw new Error("Invalid SharedAccessSignature in the provided SAS Connection String");return{kind:"SASConnString",url:r,accountName:s,accountSas:t}}}function ys(e,t=!0){const r=e.toISOString();return t?r.substring(0,r.length-1)+"0000Z":r.substring(0,r.length-5)+"Z"}function gs(e){const t=v.parse(e);let r;try{return r="queue"===t.getHost().split(".")[1]?t.getHost().split(".")[0]:xs(t)?t.getPath().split("/")[1]:"",r}catch(e){throw new Error("Unable to extract accountName with provided information.")}}function xs(e){if(void 0===e.getHost())return!1;const t=e.getHost()+(void 0===e.getPort()?"":":"+e.getPort());return/^.*:.*:.*$|^localhost(:[0-9]+)?$|^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}(:[0-9]+)?$/.test(t)}function Ns(e,t){const r=new ms(e,t.toServiceClientOptions());return r.requestContentType=void 0,r}function vs(e,t){const r=v.parse(e);let s=r.getQuery();return s?s+="&"+t:s=t,r.setQuery(s),r.toString()}class Ss extends H{constructor(e,t){super(e,t)}async sendRequest(e){return f||("GET"!==e.method.toUpperCase()&&"HEAD"!==e.method.toUpperCase()||(e.url=ps(e.url,qr,(new Date).getTime().toString())),e.headers.remove("Cookie"),e.headers.remove("content-length")),this._nextPolicy.sendRequest(e)}}class bs{create(e,t){return new Ss(e,t)}}var ws;!function(e){e[e.EXPONENTIAL=0]="EXPONENTIAL",e[e.FIXED=1]="FIXED"}(ws||(ws={}));const Rs={maxRetryDelayInMs:12e4,maxTries:4,retryDelayInMs:4e3,retryPolicyType:ws.EXPONENTIAL,secondaryHost:"",tryTimeoutInMs:3e4},Ps=new Nr("The operation was aborted.");class qs extends H{constructor(e,t,r=Rs){super(e,t),this.retryOptions={retryPolicyType:r.retryPolicyType?r.retryPolicyType:Rs.retryPolicyType,maxTries:r.maxTries&&r.maxTries>=1?Math.floor(r.maxTries):Rs.maxTries,tryTimeoutInMs:r.tryTimeoutInMs&&r.tryTimeoutInMs>=0?r.tryTimeoutInMs:Rs.tryTimeoutInMs,retryDelayInMs:r.retryDelayInMs&&r.retryDelayInMs>=0?Math.min(r.retryDelayInMs,r.maxRetryDelayInMs?r.maxRetryDelayInMs:Rs.maxRetryDelayInMs):Rs.retryDelayInMs,maxRetryDelayInMs:r.maxRetryDelayInMs&&r.maxRetryDelayInMs>=0?r.maxRetryDelayInMs:Rs.maxRetryDelayInMs,secondaryHost:r.secondaryHost?r.secondaryHost:Rs.secondaryHost}}async sendRequest(e){return this.attemptSendRequest(e,!1,1)}async attemptSendRequest(e,t,r){const s=e.clone(),n=t||!this.retryOptions.secondaryHost||!("GET"===e.method||"HEAD"===e.method||"OPTIONS"===e.method)||r%2==1;let i;n||(s.url=function(e,t){const r=v.parse(e);return r.setHost(t),r.toString()}(s.url,this.retryOptions.secondaryHost)),s.url=ps(s.url,Er,Math.floor(this.retryOptions.tryTimeoutInMs/1e3).toString());try{if(wr.info(`RetryPolicy: =====> Try=${r} ${n?"Primary":"Secondary"}`),i=await this._nextPolicy.sendRequest(s),!this.shouldRetry(n,r,i))return i;t=t||!n&&404===i.status}catch(e){if(wr.error(`RetryPolicy: Caught error, message: ${e.message}, code: ${e.code}`),!this.shouldRetry(n,r,i,e))throw e}return await this.delay(n,r,e.abortSignal),this.attemptSendRequest(e,t,++r)}shouldRetry(e,t,r,s){if(t>=this.retryOptions.maxTries)return wr.info(`RetryPolicy: Attempt(s) ${t} >= maxTries ${this.retryOptions.maxTries}, no further try.`),!1;const n=["ETIMEDOUT","ESOCKETTIMEDOUT","ECONNREFUSED","ECONNRESET","ENOENT","ENOTFOUND","TIMEOUT","EPIPE","REQUEST_SEND_ERROR"];if(s)for(const e of n)if(s.name.toUpperCase().includes(e)||s.message.toUpperCase().includes(e)||s.code&&s.code.toString().toUpperCase()===e)return wr.info(`RetryPolicy: Network error ${e} found, will retry.`),!0;if(r||s){const t=r?r.status:s?s.statusCode:0;if(!e&&404===t)return wr.info("RetryPolicy: Secondary access with 404, will retry."),!0;if(503===t||500===t)return wr.info(`RetryPolicy: Will retry for status code ${t}.`),!0}return!("PARSE_ERROR"!==(null==s?void 0:s.code)||!(null==s?void 0:s.message.startsWith('Error "Error: Unclosed root tag'))||(wr.info("RetryPolicy: Incomplete XML response likely due to service timeout, will retry."),0))}async delay(e,t,r){let s=0;if(e)switch(this.retryOptions.retryPolicyType){case ws.EXPONENTIAL:s=Math.min((Math.pow(2,t-1)-1)*this.retryOptions.retryDelayInMs,this.retryOptions.maxRetryDelayInMs);break;case ws.FIXED:s=this.retryOptions.retryDelayInMs}else s=1e3*Math.random();return wr.info(`RetryPolicy: Delay for ${s}ms`),async function(e,t,r){return new Promise(((s,n)=>{let i;const a=()=>{void 0!==i&&clearTimeout(i),n(r)};i=setTimeout((()=>{void 0!==t&&t.removeEventListener("abort",a),s()}),e),void 0!==t&&t.addEventListener("abort",a)}))}(s,r,Ps)}}class Es{constructor(e){this.retryOptions=e}create(e,t){return new qs(e,t,this.retryOptions)}}var Os=r(231);class Cs extends H{constructor(e,t,r){super(e,t),this.telemetry=r}async sendRequest(e){return f&&(e.headers||(e.headers=new ge),e.headers.get(Or)||e.headers.set(Or,this.telemetry)),this._nextPolicy.sendRequest(e)}}class Ms{constructor(e){const t=[];if(f){if(e){const r=e.userAgentPrefix||"";r.length>0&&-1===t.indexOf(r)&&t.push(r)}const r="azsdk-js-storagequeue/12.9.0";-1===t.indexOf(r)&&t.push(r);let s=`(NODE-VERSION ${process.version})`;Os&&(s=`(NODE-VERSION ${process.version}; ${Os.type()} ${Os.release()})`),-1===t.indexOf(s)&&t.push(s)}this.telemetryString=t.join(" ")}create(e,t){return new Cs(e,t,this.telemetryString)}}const zs=new Fr;class Is{constructor(e,t={}){this.factories=e,this.options=Object.assign(Object.assign({},t),{httpClient:t.httpClient||zs})}toServiceClientOptions(){return{httpClient:this.options.httpClient,requestPolicyFactories:this.factories}}}function Ts(e,t={}){void 0===e&&(e=new U);const r=new Ms(t.userAgentOptions),s=[ar({userAgent:r.telemetryString}),(n=t.keepAliveOptions,{create:(e,t)=>new cr(e,t,n||ur)}),r,lr(),new bs,new Es(t.retryOptions),me(),dr({logger:wr.info,allowedHeaderNames:Cr,allowedQueryParameters:Mr})];var n;return f&&s.push(fr(t.proxyOptions)),s.push(yr(e)?br(e,Pr):e),new Is(s,t)}function _s(e){return this instanceof _s?(this.v=e,this):new _s(e)}function As(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=r.apply(e,t||[]),i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(e){n[e]&&(s[e]=function(t){return new Promise((function(r,s){i.push([e,t,r,s])>1||o(e,t)}))})}function o(e,t){try{(r=n[e](t)).value instanceof _s?Promise.resolve(r.value.v).then(u,c):l(i[0][2],r)}catch(e){l(i[0][3],e)}var r}function u(e){o("next",e)}function c(e){o("throw",e)}function l(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function Ds(e){var t,r;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,n){t[s]=e[s]?function(t){return(r=!r)?{value:_s(e[s](t)),done:"return"===s}:n?n(t):t}:n}}function Hs(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=e[r]&&function(t){return new Promise((function(s,n){!function(e,t,r,s){Promise.resolve(s).then((function(t){e({value:t,done:r})}),t)}(s,n,(t=e[r](t)).done,t.value)}))}}}function ks(e){const{requestOptions:t,tracingOptions:r}=e,s=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["requestOptions","tracingOptions"]);let n=s;return t&&(n=Object.assign(Object.assign({},n),t)),r&&(n.tracingContext=r.tracingContext,n.spanOptions=null==r?void 0:r.spanOptions),n}Object.create,Object.create;const $s={serializedName:"QueueServiceProperties",xmlName:"StorageServiceProperties",type:{name:"Composite",className:"QueueServiceProperties",modelProperties:{queueAnalyticsLogging:{serializedName:"Logging",xmlName:"Logging",type:{name:"Composite",className:"Logging"}},hourMetrics:{serializedName:"HourMetrics",xmlName:"HourMetrics",type:{name:"Composite",className:"Metrics"}},minuteMetrics:{serializedName:"MinuteMetrics",xmlName:"MinuteMetrics",type:{name:"Composite",className:"Metrics"}},cors:{serializedName:"Cors",xmlName:"Cors",xmlIsWrapped:!0,xmlElementName:"CorsRule",type:{name:"Sequence",element:{type:{name:"Composite",className:"CorsRule"}}}}}}},js={serializedName:"Logging",type:{name:"Composite",className:"Logging",modelProperties:{version:{serializedName:"Version",required:!0,xmlName:"Version",type:{name:"String"}},deleteProperty:{serializedName:"Delete",required:!0,xmlName:"Delete",type:{name:"Boolean"}},read:{serializedName:"Read",required:!0,xmlName:"Read",type:{name:"Boolean"}},write:{serializedName:"Write",required:!0,xmlName:"Write",type:{name:"Boolean"}},retentionPolicy:{serializedName:"RetentionPolicy",xmlName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},Qs={serializedName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy",modelProperties:{enabled:{serializedName:"Enabled",required:!0,xmlName:"Enabled",type:{name:"Boolean"}},days:{constraints:{InclusiveMinimum:1},serializedName:"Days",xmlName:"Days",type:{name:"Number"}}}}},Us={serializedName:"Metrics",type:{name:"Composite",className:"Metrics",modelProperties:{version:{serializedName:"Version",xmlName:"Version",type:{name:"String"}},enabled:{serializedName:"Enabled",required:!0,xmlName:"Enabled",type:{name:"Boolean"}},includeAPIs:{serializedName:"IncludeAPIs",xmlName:"IncludeAPIs",type:{name:"Boolean"}},retentionPolicy:{serializedName:"RetentionPolicy",xmlName:"RetentionPolicy",type:{name:"Composite",className:"RetentionPolicy"}}}}},Ls={serializedName:"CorsRule",type:{name:"Composite",className:"CorsRule",modelProperties:{allowedOrigins:{serializedName:"AllowedOrigins",required:!0,xmlName:"AllowedOrigins",type:{name:"String"}},allowedMethods:{serializedName:"AllowedMethods",required:!0,xmlName:"AllowedMethods",type:{name:"String"}},allowedHeaders:{serializedName:"AllowedHeaders",required:!0,xmlName:"AllowedHeaders",type:{name:"String"}},exposedHeaders:{serializedName:"ExposedHeaders",required:!0,xmlName:"ExposedHeaders",type:{name:"String"}},maxAgeInSeconds:{constraints:{InclusiveMinimum:0},serializedName:"MaxAgeInSeconds",required:!0,xmlName:"MaxAgeInSeconds",type:{name:"Number"}}}}},Bs={serializedName:"StorageError",type:{name:"Composite",className:"StorageError",modelProperties:{message:{serializedName:"Message",xmlName:"Message",type:{name:"String"}},code:{serializedName:"Code",xmlName:"Code",type:{name:"String"}}}}},Vs={serializedName:"QueueServiceStatistics",xmlName:"StorageServiceStats",type:{name:"Composite",className:"QueueServiceStatistics",modelProperties:{geoReplication:{serializedName:"GeoReplication",xmlName:"GeoReplication",type:{name:"Composite",className:"GeoReplication"}}}}},Fs={serializedName:"GeoReplication",type:{name:"Composite",className:"GeoReplication",modelProperties:{status:{serializedName:"Status",required:!0,xmlName:"Status",type:{name:"Enum",allowedValues:["live","bootstrap","unavailable"]}},lastSyncOn:{serializedName:"LastSyncTime",required:!0,xmlName:"LastSyncTime",type:{name:"DateTimeRfc1123"}}}}},Gs={serializedName:"ListQueuesSegmentResponse",xmlName:"EnumerationResults",type:{name:"Composite",className:"ListQueuesSegmentResponse",modelProperties:{serviceEndpoint:{serializedName:"ServiceEndpoint",required:!0,xmlName:"ServiceEndpoint",xmlIsAttribute:!0,type:{name:"String"}},prefix:{serializedName:"Prefix",required:!0,xmlName:"Prefix",type:{name:"String"}},marker:{serializedName:"Marker",xmlName:"Marker",type:{name:"String"}},maxPageSize:{serializedName:"MaxResults",required:!0,xmlName:"MaxResults",type:{name:"Number"}},queueItems:{serializedName:"QueueItems",xmlName:"Queues",xmlIsWrapped:!0,xmlElementName:"Queue",type:{name:"Sequence",element:{type:{name:"Composite",className:"QueueItem"}}}},continuationToken:{serializedName:"NextMarker",required:!0,xmlName:"NextMarker",type:{name:"String"}}}}},Ws={serializedName:"QueueItem",xmlName:"Queue",type:{name:"Composite",className:"QueueItem",modelProperties:{name:{serializedName:"Name",required:!0,xmlName:"Name",type:{name:"String"}},metadata:{serializedName:"Metadata",xmlName:"Metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ks={serializedName:"SignedIdentifier",type:{name:"Composite",className:"SignedIdentifier",modelProperties:{id:{serializedName:"Id",required:!0,xmlName:"Id",type:{name:"String"}},accessPolicy:{serializedName:"AccessPolicy",xmlName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy"}}}}},Xs={serializedName:"AccessPolicy",type:{name:"Composite",className:"AccessPolicy",modelProperties:{startsOn:{serializedName:"Start",xmlName:"Start",type:{name:"String"}},expiresOn:{serializedName:"Expiry",xmlName:"Expiry",type:{name:"String"}},permissions:{serializedName:"Permission",xmlName:"Permission",type:{name:"String"}}}}},Js={serializedName:"DequeuedMessageItem",xmlName:"QueueMessage",xmlIsWrapped:!0,type:{name:"Composite",className:"DequeuedMessageItem",modelProperties:{messageId:{serializedName:"MessageId",required:!0,xmlName:"MessageId",type:{name:"String"}},insertedOn:{serializedName:"InsertionTime",required:!0,xmlName:"InsertionTime",type:{name:"DateTimeRfc1123"}},expiresOn:{serializedName:"ExpirationTime",required:!0,xmlName:"ExpirationTime",type:{name:"DateTimeRfc1123"}},popReceipt:{serializedName:"PopReceipt",required:!0,xmlName:"PopReceipt",type:{name:"String"}},nextVisibleOn:{serializedName:"TimeNextVisible",required:!0,xmlName:"TimeNextVisible",type:{name:"DateTimeRfc1123"}},dequeueCount:{serializedName:"DequeueCount",required:!0,xmlName:"DequeueCount",type:{name:"Number"}},messageText:{serializedName:"MessageText",required:!0,xmlName:"MessageText",type:{name:"String"}}}}},Ys={serializedName:"QueueMessage",type:{name:"Composite",className:"QueueMessage",modelProperties:{messageText:{serializedName:"MessageText",required:!0,xmlName:"MessageText",type:{name:"String"}}}}},Zs={serializedName:"EnqueuedMessage",xmlName:"QueueMessage",xmlIsWrapped:!0,type:{name:"Composite",className:"EnqueuedMessage",modelProperties:{messageId:{serializedName:"MessageId",required:!0,xmlName:"MessageId",type:{name:"String"}},insertedOn:{serializedName:"InsertionTime",required:!0,xmlName:"InsertionTime",type:{name:"DateTimeRfc1123"}},expiresOn:{serializedName:"ExpirationTime",required:!0,xmlName:"ExpirationTime",type:{name:"DateTimeRfc1123"}},popReceipt:{serializedName:"PopReceipt",required:!0,xmlName:"PopReceipt",type:{name:"String"}},nextVisibleOn:{serializedName:"TimeNextVisible",required:!0,xmlName:"TimeNextVisible",type:{name:"DateTimeRfc1123"}}}}},en={serializedName:"PeekedMessageItem",xmlName:"QueueMessage",xmlIsWrapped:!0,type:{name:"Composite",className:"PeekedMessageItem",modelProperties:{messageId:{serializedName:"MessageId",required:!0,xmlName:"MessageId",type:{name:"String"}},insertedOn:{serializedName:"InsertionTime",required:!0,xmlName:"InsertionTime",type:{name:"DateTimeRfc1123"}},expiresOn:{serializedName:"ExpirationTime",required:!0,xmlName:"ExpirationTime",type:{name:"DateTimeRfc1123"}},dequeueCount:{serializedName:"DequeueCount",required:!0,xmlName:"DequeueCount",type:{name:"Number"}},messageText:{serializedName:"MessageText",required:!0,xmlName:"MessageText",type:{name:"String"}}}}},tn={serializedName:"Service_setPropertiesHeaders",type:{name:"Composite",className:"ServiceSetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},rn={serializedName:"Service_setPropertiesExceptionHeaders",type:{name:"Composite",className:"ServiceSetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},sn={serializedName:"Service_getPropertiesHeaders",type:{name:"Composite",className:"ServiceGetPropertiesHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},nn={serializedName:"Service_getPropertiesExceptionHeaders",type:{name:"Composite",className:"ServiceGetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},an={serializedName:"Service_getStatisticsHeaders",type:{name:"Composite",className:"ServiceGetStatisticsHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},on={serializedName:"Service_getStatisticsExceptionHeaders",type:{name:"Composite",className:"ServiceGetStatisticsExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},un={serializedName:"Service_listQueuesSegmentHeaders",type:{name:"Composite",className:"ServiceListQueuesSegmentHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},cn={serializedName:"Service_listQueuesSegmentExceptionHeaders",type:{name:"Composite",className:"ServiceListQueuesSegmentExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},ln={serializedName:"Queue_createHeaders",type:{name:"Composite",className:"QueueCreateHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},mn={serializedName:"Queue_createExceptionHeaders",type:{name:"Composite",className:"QueueCreateExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},dn={serializedName:"Queue_deleteHeaders",type:{name:"Composite",className:"QueueDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},pn={serializedName:"Queue_deleteExceptionHeaders",type:{name:"Composite",className:"QueueDeleteExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},hn={serializedName:"Queue_getPropertiesHeaders",type:{name:"Composite",className:"QueueGetPropertiesHeaders",modelProperties:{metadata:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"},approximateMessagesCount:{serializedName:"x-ms-approximate-messages-count",xmlName:"x-ms-approximate-messages-count",type:{name:"Number"}},requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},fn={serializedName:"Queue_getPropertiesExceptionHeaders",type:{name:"Composite",className:"QueueGetPropertiesExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},yn={serializedName:"Queue_setMetadataHeaders",type:{name:"Composite",className:"QueueSetMetadataHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},gn={serializedName:"Queue_setMetadataExceptionHeaders",type:{name:"Composite",className:"QueueSetMetadataExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},xn={serializedName:"Queue_getAccessPolicyHeaders",type:{name:"Composite",className:"QueueGetAccessPolicyHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Nn={serializedName:"Queue_getAccessPolicyExceptionHeaders",type:{name:"Composite",className:"QueueGetAccessPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},vn={serializedName:"Queue_setAccessPolicyHeaders",type:{name:"Composite",className:"QueueSetAccessPolicyHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Sn={serializedName:"Queue_setAccessPolicyExceptionHeaders",type:{name:"Composite",className:"QueueSetAccessPolicyExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},bn={serializedName:"Messages_dequeueHeaders",type:{name:"Composite",className:"MessagesDequeueHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},wn={serializedName:"Messages_dequeueExceptionHeaders",type:{name:"Composite",className:"MessagesDequeueExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},Rn={serializedName:"Messages_clearHeaders",type:{name:"Composite",className:"MessagesClearHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Pn={serializedName:"Messages_clearExceptionHeaders",type:{name:"Composite",className:"MessagesClearExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},qn={serializedName:"Messages_enqueueHeaders",type:{name:"Composite",className:"MessagesEnqueueHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},En={serializedName:"Messages_enqueueExceptionHeaders",type:{name:"Composite",className:"MessagesEnqueueExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},On={serializedName:"Messages_peekHeaders",type:{name:"Composite",className:"MessagesPeekHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Cn={serializedName:"Messages_peekExceptionHeaders",type:{name:"Composite",className:"MessagesPeekExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},Mn={serializedName:"MessageId_updateHeaders",type:{name:"Composite",className:"MessageIdUpdateHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},popReceipt:{serializedName:"x-ms-popreceipt",xmlName:"x-ms-popreceipt",type:{name:"String"}},nextVisibleOn:{serializedName:"x-ms-time-next-visible",xmlName:"x-ms-time-next-visible",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},zn={serializedName:"MessageId_updateExceptionHeaders",type:{name:"Composite",className:"MessageIdUpdateExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},In={serializedName:"MessageId_deleteHeaders",type:{name:"Composite",className:"MessageIdDeleteHeaders",modelProperties:{requestId:{serializedName:"x-ms-request-id",xmlName:"x-ms-request-id",type:{name:"String"}},version:{serializedName:"x-ms-version",xmlName:"x-ms-version",type:{name:"String"}},date:{serializedName:"date",xmlName:"date",type:{name:"DateTimeRfc1123"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}},errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}}}}},Tn={serializedName:"MessageId_deleteExceptionHeaders",type:{name:"Composite",className:"MessageIdDeleteExceptionHeaders",modelProperties:{errorCode:{serializedName:"x-ms-error-code",xmlName:"x-ms-error-code",type:{name:"String"}},clientRequestId:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}}}},_n={parameterPath:["options","contentType"],mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},An={parameterPath:"properties",mapper:$s},Dn={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Hn={parameterPath:"url",mapper:{serializedName:"url",required:!0,xmlName:"url",type:{name:"String"}},skipEncoding:!0},kn={parameterPath:"restype",mapper:{defaultValue:"service",isConstant:!0,serializedName:"restype",type:{name:"String"}}},$n={parameterPath:"comp",mapper:{defaultValue:"properties",isConstant:!0,serializedName:"comp",type:{name:"String"}}},jn={parameterPath:["options","timeoutInSeconds"],mapper:{constraints:{InclusiveMinimum:0},serializedName:"timeout",xmlName:"timeout",type:{name:"Number"}}},Qn={parameterPath:"version",mapper:{defaultValue:"2021-04-10",isConstant:!0,serializedName:"x-ms-version",type:{name:"String"}}},Un={parameterPath:["options","requestId"],mapper:{serializedName:"x-ms-client-request-id",xmlName:"x-ms-client-request-id",type:{name:"String"}}},Ln={parameterPath:"accept",mapper:{defaultValue:"application/xml",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Bn={parameterPath:["options","include"],mapper:{serializedName:"include",xmlName:"include",xmlElementName:"ListQueuesIncludeType",type:{name:"Sequence",element:{defaultValue:"metadata",isConstant:!0,type:{name:"String"}}}},collectionFormat:Vr.Csv},Vn={parameterPath:["options","metadata"],mapper:{serializedName:"x-ms-meta",xmlName:"x-ms-meta",type:{name:"Dictionary",value:{type:{name:"String"}}},headerCollectionPrefix:"x-ms-meta-"}},Fn={parameterPath:"comp",mapper:{defaultValue:"metadata",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Gn={parameterPath:"comp",mapper:{defaultValue:"acl",isConstant:!0,serializedName:"comp",type:{name:"String"}}},Wn={parameterPath:["options","numberOfMessages"],mapper:{constraints:{InclusiveMinimum:1},serializedName:"numofmessages",xmlName:"numofmessages",type:{name:"Number"}}},Kn={parameterPath:["options","visibilityTimeout"],mapper:{constraints:{InclusiveMaximum:604800,InclusiveMinimum:0},serializedName:"visibilitytimeout",xmlName:"visibilitytimeout",type:{name:"Number"}}},Xn={parameterPath:"queueMessage",mapper:Ys},Jn={parameterPath:["options","queueMessage"],mapper:Ys},Yn={parameterPath:"popReceipt",mapper:{serializedName:"popreceipt",required:!0,xmlName:"popreceipt",type:{name:"String"}}};class Zn{constructor(e){this.client=e}create(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ti)}delete(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ri)}getProperties(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,si)}setMetadata(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ni)}getAccessPolicy(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ii)}setAccessPolicy(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ai)}}const ei=new V(s,!0),ti={path:"/{queueName}",httpMethod:"PUT",responses:{201:{headersMapper:ln},204:{headersMapper:ln},default:{bodyMapper:Bs,headersMapper:mn}},queryParameters:[jn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln,Vn],isXML:!0,serializer:ei},ri={path:"/{queueName}",httpMethod:"DELETE",responses:{204:{headersMapper:dn},default:{bodyMapper:Bs,headersMapper:pn}},queryParameters:[jn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ei},si={path:"/{queueName}",httpMethod:"GET",responses:{200:{headersMapper:hn},default:{bodyMapper:Bs,headersMapper:fn}},queryParameters:[jn,Fn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ei},ni={path:"/{queueName}",httpMethod:"PUT",responses:{204:{headersMapper:yn},default:{bodyMapper:Bs,headersMapper:gn}},queryParameters:[jn,Fn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln,Vn],isXML:!0,serializer:ei},ii={path:"/{queueName}",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}},serializedName:"SignedIdentifiers",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier"},headersMapper:xn},default:{bodyMapper:Bs,headersMapper:Nn}},queryParameters:[jn,Gn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ei},ai={path:"/{queueName}",httpMethod:"PUT",responses:{204:{headersMapper:vn},default:{bodyMapper:Bs,headersMapper:Sn}},requestBody:{parameterPath:["options","queueAcl"],mapper:{serializedName:"queueAcl",xmlName:"SignedIdentifiers",xmlIsWrapped:!0,xmlElementName:"SignedIdentifier",type:{name:"Sequence",element:{type:{name:"Composite",className:"SignedIdentifier"}}}}},queryParameters:[jn,Gn],urlParameters:[Hn],headerParameters:[_n,Dn,Qn,Un],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ei};class oi{constructor(e){this.client=e}dequeue(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,ci)}clear(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,li)}enqueue(e,t){const r={queueMessage:e,options:ks(t||{})};return this.client.sendOperationRequest(r,mi)}peek(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,di)}}const ui=new V(s,!0),ci={path:"/{queueName}/messages",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"DequeuedMessageItem"}}},serializedName:"DequeuedMessagesList",xmlName:"QueueMessagesList",xmlIsWrapped:!0,xmlElementName:"QueueMessage"},headersMapper:bn},default:{bodyMapper:Bs,headersMapper:wn}},queryParameters:[jn,Wn,Kn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ui},li={path:"/{queueName}/messages",httpMethod:"DELETE",responses:{204:{headersMapper:Rn},default:{bodyMapper:Bs,headersMapper:Pn}},queryParameters:[jn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ui},mi={path:"/{queueName}/messages",httpMethod:"POST",responses:{201:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"EnqueuedMessage"}}},serializedName:"EnqueuedMessageList",xmlName:"QueueMessagesList",xmlIsWrapped:!0,xmlElementName:"QueueMessage"},headersMapper:qn},default:{bodyMapper:Bs,headersMapper:En}},requestBody:Xn,queryParameters:[jn,Kn,{parameterPath:["options","messageTimeToLive"],mapper:{constraints:{InclusiveMinimum:-1},serializedName:"messagettl",xmlName:"messagettl",type:{name:"Number"}}}],urlParameters:[Hn],headerParameters:[_n,Dn,Qn,Un],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:ui},di={path:"/{queueName}/messages",httpMethod:"GET",responses:{200:{bodyMapper:{type:{name:"Sequence",element:{type:{name:"Composite",className:"PeekedMessageItem"}}},serializedName:"PeekedMessagesList",xmlName:"QueueMessagesList",xmlIsWrapped:!0,xmlElementName:"QueueMessage"},headersMapper:On},default:{bodyMapper:Bs,headersMapper:Cn}},queryParameters:[jn,Wn,{parameterPath:"peekonly",mapper:{defaultValue:"true",isConstant:!0,serializedName:"peekonly",type:{name:"String"}}}],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:ui};class pi{constructor(e){this.client=e}update(e,t,r){const s={popReceipt:e,visibilityTimeout:t,options:ks(r||{})};return this.client.sendOperationRequest(s,fi)}delete(e,t){const r={popReceipt:e,options:ks(t||{})};return this.client.sendOperationRequest(r,yi)}}const hi=new V(s,!0),fi={path:"/{queueName}/messages/{messageid}",httpMethod:"PUT",responses:{204:{headersMapper:Mn},default:{bodyMapper:Bs,headersMapper:zn}},requestBody:Jn,queryParameters:[jn,Yn,{parameterPath:"visibilityTimeout",mapper:{constraints:{InclusiveMaximum:604800,InclusiveMinimum:0},serializedName:"visibilitytimeout",required:!0,xmlName:"visibilitytimeout",type:{name:"Number"}}}],urlParameters:[Hn],headerParameters:[_n,Dn,Qn,Un],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:hi},yi={path:"/{queueName}/messages/{messageid}",httpMethod:"DELETE",responses:{204:{headersMapper:In},default:{bodyMapper:Bs,headersMapper:Tn}},queryParameters:[jn,Yn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:hi};class gi{}class xi{constructor(e,t){this.url=e,this.accountName=gs(e),this.pipeline=t,this.storageClientContext=Ns(e,t),this.credential=new U;for(const e of this.pipeline.factories){if(f&&e instanceof gi||e instanceof U){this.credential=e;break}try{if("BearerTokenAuthenticationPolicy"===e.create().constructor.name){this.credential=e;break}}catch(e){}}}}const Ni=_t({packagePrefix:"Azure.Storage.Queue",namespace:"Microsoft.Storage"});class vi{constructor(){this.read=!1,this.add=!1,this.update=!1,this.process=!1}static parse(e){const t=new vi;for(const r of e)switch(r){case"r":t.read=!0;break;case"a":t.add=!0;break;case"u":t.update=!0;break;case"p":t.process=!0;break;default:throw new RangeError(`Invalid permission: ${r}`)}return t}toString(){const e=[];return this.read&&e.push("r"),this.add&&e.push("a"),this.update&&e.push("u"),this.process&&e.push("p"),e.join("")}}function Si(e){return e.end?`${e.start}-${e.end}`:e.start}var bi;!function(e){e.Https="https",e.HttpsAndHttp="https,http"}(bi||(bi={}));class wi{constructor(e,t,r,s,n,i,a,o,u,c,l){this.version=e,this.services=s,this.resourceTypes=n,this.expiresOn=o,this.permissions=r,this.protocol=i,this.startsOn=a,this.ipRangeInner=u,this.identifier=c,this.resource=l,this.signature=t}get ipRange(){if(this.ipRangeInner)return{end:this.ipRangeInner.end,start:this.ipRangeInner.start}}toString(){const e=["sv","ss","srt","spr","st","se","sip","si","sr","sp","sig"],t=[];for(const r of e)switch(r){case"sv":this.tryAppendQueryParameter(t,r,this.version);break;case"ss":this.tryAppendQueryParameter(t,r,this.services);break;case"srt":this.tryAppendQueryParameter(t,r,this.resourceTypes);break;case"spr":this.tryAppendQueryParameter(t,r,this.protocol);break;case"st":this.tryAppendQueryParameter(t,r,this.startsOn?ys(this.startsOn,!1):void 0);break;case"se":this.tryAppendQueryParameter(t,r,this.expiresOn?ys(this.expiresOn,!1):void 0);break;case"sip":this.tryAppendQueryParameter(t,r,this.ipRange?Si(this.ipRange):void 0);break;case"si":this.tryAppendQueryParameter(t,r,this.identifier);break;case"sr":this.tryAppendQueryParameter(t,r,this.resource);break;case"sp":this.tryAppendQueryParameter(t,r,this.permissions);break;case"sig":this.tryAppendQueryParameter(t,r,this.signature)}return t.join("&")}tryAppendQueryParameter(e,t,r){r&&(t=encodeURIComponent(t),r=encodeURIComponent(r),t.length>0&&r.length>0&&e.push(`${t}=${r}`))}}class Ri extends xi{constructor(e,t,r){let s,n;if(r=r||{},t instanceof Is)n=e,s=t;else if(f&&t instanceof gi||t instanceof U||yr(t))n=e,s=Ts(t,r);else if(t||"string"==typeof t){if(!t||"string"!=typeof t)throw new Error("Expecting non-empty strings for queueName parameter");{const i=fs(e);if("AccountConnString"===i.kind){if(!f)throw new Error("Account connection string is only supported in Node.js environment");{const e=t,a=new gi(i.accountName,i.accountKey);n=ds(i.url,e),r.proxyOptions||(r.proxyOptions=void i.proxyUri),s=Ts(a,r)}}else{if("SASConnString"!==i.kind)throw new Error("Connection string must be either an Account connection string or a SAS connection string");{const e=t;n=ds(i.url,e)+"?"+i.accountSas,s=Ts(new U,r)}}}}else n=e,s=Ts(new U,r);super(n,s),this._name=this.getQueueNameFromUrl(),this.queueContext=new Zn(this.storageClientContext);const i=this.url.split("?");this._messagesUrl=i[1]?ds(i[0],"messages")+"?"+i[1]:ds(i[0],"messages"),this.messagesContext=new oi(Ns(this._messagesUrl,this.pipeline))}get name(){return this._name}getMessageIdContext(e){const t=this._messagesUrl.split("?"),r=t[1]?ds(t[0],e)+"?"+t[1]:ds(t[0],e);return new pi(Ns(r,this.pipeline))}async create(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-create",e);try{return await this.queueContext.create(Object.assign(Object.assign({},r),{abortSignal:e.abortSignal}))}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async createIfNotExists(e={}){var t,r;const{span:s,updatedOptions:n}=Ni("QueueClient-createIfNotExists",e);try{const e=await this.create(n);return 204===e._response.status?Object.assign({succeeded:!1},e):Object.assign({succeeded:!0},e)}catch(e){if("QueueAlreadyExists"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return s.setStatus({code:Tt.ERROR,message:"Expected exception when creating a queue only if it does not already exist."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw s.setStatus({code:Tt.ERROR,message:e.message}),e}finally{s.end()}}async deleteIfExists(e={}){var t,r;const{span:s,updatedOptions:n}=Ni("QueueClient-deleteIfExists",e);try{const e=await this.delete(n);return Object.assign({succeeded:!0},e)}catch(e){if("QueueNotFound"===(null===(t=e.details)||void 0===t?void 0:t.errorCode))return s.setStatus({code:Tt.ERROR,message:"Expected exception when deleting a queue only if it exists."}),Object.assign(Object.assign({succeeded:!1},null===(r=e.response)||void 0===r?void 0:r.parsedHeaders),{_response:e.response});throw s.setStatus({code:Tt.ERROR,message:e.message}),e}finally{s.end()}}async delete(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-delete",e);try{return await this.queueContext.delete({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions})}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async exists(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-exists",e);try{return await this.getProperties({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions}),!0}catch(e){if(404===e.statusCode)return t.setStatus({code:Tt.ERROR,message:"Expected exception when checking queue existence"}),!1;throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async getProperties(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-getProperties",e);try{return await this.queueContext.getProperties({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions})}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async setMetadata(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueClient-setMetadata",t);try{return await this.queueContext.setMetadata({abortSignal:t.abortSignal,metadata:e,tracingOptions:s.tracingOptions})}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}async getAccessPolicy(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-getAccessPolicy",e);try{const s=await this.queueContext.getAccessPolicy({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions}),n={_response:s._response,date:s.date,requestId:s.requestId,clientRequestId:s.clientRequestId,signedIdentifiers:[],version:s.version,errorCode:s.errorCode};for(const e of s){let t;e.accessPolicy&&(t={permissions:e.accessPolicy.permissions},e.accessPolicy.expiresOn&&(t.expiresOn=new Date(e.accessPolicy.expiresOn)),e.accessPolicy.startsOn&&(t.startsOn=new Date(e.accessPolicy.startsOn))),n.signedIdentifiers.push({accessPolicy:t,id:e.id})}return n}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async setAccessPolicy(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueClient-setAccessPolicy",t);try{const n=[];for(const t of e||[])n.push({accessPolicy:{expiresOn:t.accessPolicy.expiresOn?ys(t.accessPolicy.expiresOn):void 0,permissions:t.accessPolicy.permissions,startsOn:t.accessPolicy.startsOn?ys(t.accessPolicy.startsOn):void 0},id:t.id});return await this.queueContext.setAccessPolicy({abortSignal:t.abortSignal,queueAcl:n,tracingOptions:s.tracingOptions})}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}async clearMessages(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-clearMessages",e);try{return await this.messagesContext.clear({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions})}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async sendMessage(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueClient-sendMessage",t);try{const t=await this.messagesContext.enqueue({messageText:e},s),n=t[0];return{_response:t._response,date:t.date,requestId:t.requestId,clientRequestId:t.clientRequestId,version:t.version,errorCode:t.errorCode,messageId:n.messageId,popReceipt:n.popReceipt,nextVisibleOn:n.nextVisibleOn,insertedOn:n.insertedOn,expiresOn:n.expiresOn}}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}async receiveMessages(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-receiveMessages",e);try{const e=await this.messagesContext.dequeue(r),s={_response:e._response,date:e.date,requestId:e.requestId,clientRequestId:e.clientRequestId,receivedMessageItems:[],version:e.version,errorCode:e.errorCode};for(const t of e)s.receivedMessageItems.push(t);return s}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async peekMessages(e={}){const{span:t,updatedOptions:r}=Ni("QueueClient-peekMessages",e);try{const e=await this.messagesContext.peek(r),s={_response:e._response,date:e.date,requestId:e.requestId,clientRequestId:e.clientRequestId,peekedMessageItems:[],version:e.version,errorCode:e.errorCode};for(const t of e)s.peekedMessageItems.push(t);return s}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async deleteMessage(e,t,r={}){const{span:s,updatedOptions:n}=Ni("QueueClient-deleteMessage",r);try{return await this.getMessageIdContext(e).delete(t,{abortSignal:r.abortSignal,tracingOptions:n.tracingOptions})}catch(e){throw s.setStatus({code:Tt.ERROR,message:e.message}),e}finally{s.end()}}async updateMessage(e,t,r,s,n={}){const{span:i,updatedOptions:a}=Ni("QueueClient-updateMessage",n);let o;void 0!==r&&(o={messageText:r});try{return await this.getMessageIdContext(e).update(t,s||0,{abortSignal:n.abortSignal,tracingOptions:a.tracingOptions,queueMessage:o})}catch(e){throw i.setStatus({code:Tt.ERROR,message:e.message}),e}finally{i.end()}}getQueueNameFromUrl(){let e;try{const t=v.parse(this.url);if(e="queue"===t.getHost().split(".")[1]?t.getPath().split("/")[1]:xs(t)?t.getPath().split("/")[2]:t.getPath().split("/")[1],!e)throw new Error("Provided queueName is invalid.");return e}catch(e){throw new Error("Unable to extract queueName with provided information.")}}generateSasUrl(e){if(!(this.credential instanceof gi))throw RangeError("Can only generate the SAS when the client is initialized with a shared key credential");const t=function(e,t){if(!(e.identifier||e.permissions&&e.expiresOn))throw new RangeError("Must provide 'permissions' and 'expiresOn' for Queue SAS generation when 'identifier' is not provided.");const r=e.version?e.version:Rr;let s;e.permissions&&(s=vi.parse(e.permissions.toString()).toString());const n=[s||"",e.startsOn?ys(e.startsOn,!1):"",e.expiresOn?ys(e.expiresOn,!1):"",(i=t.accountName,a=e.queueName,`/queue/${i}/${a}`),e.identifier,e.ipRange?Si(e.ipRange):"",e.protocol?e.protocol:"",r].join("\n");var i,a;const o=t.computeHMACSHA256(n);return new wi(r,o,s,void 0,void 0,e.protocol,e.startsOn,e.expiresOn,e.ipRange,e.identifier)}(Object.assign({queueName:this.name},e),this.credential).toString();return vs(this.url,t)}}class Pi{constructor(e){this.client=e}setProperties(e,t){const r={properties:e,options:ks(t||{})};return this.client.sendOperationRequest(r,Ei)}getProperties(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,Oi)}getStatistics(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,Ci)}listQueuesSegment(e){const t={options:ks(e||{})};return this.client.sendOperationRequest(t,Mi)}}const qi=new V(s,!0),Ei={path:"/",httpMethod:"PUT",responses:{202:{headersMapper:tn},default:{bodyMapper:Bs,headersMapper:rn}},requestBody:An,queryParameters:[kn,$n,jn],urlParameters:[Hn],headerParameters:[_n,Dn,Qn,Un],isXML:!0,contentType:"application/xml; charset=utf-8",mediaType:"xml",serializer:qi},Oi={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:$s,headersMapper:sn},default:{bodyMapper:Bs,headersMapper:nn}},queryParameters:[kn,$n,jn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:qi},Ci={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:Vs,headersMapper:an},default:{bodyMapper:Bs,headersMapper:on}},queryParameters:[kn,jn,{parameterPath:"comp",mapper:{defaultValue:"stats",isConstant:!0,serializedName:"comp",type:{name:"String"}}}],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:qi},Mi={path:"/",httpMethod:"GET",responses:{200:{bodyMapper:Gs,headersMapper:un},default:{bodyMapper:Bs,headersMapper:cn}},queryParameters:[jn,{parameterPath:"comp",mapper:{defaultValue:"list",isConstant:!0,serializedName:"comp",type:{name:"String"}}},{parameterPath:["options","prefix"],mapper:{serializedName:"prefix",xmlName:"prefix",type:{name:"String"}}},{parameterPath:["options","marker"],mapper:{serializedName:"marker",xmlName:"marker",type:{name:"String"}}},{parameterPath:["options","maxPageSize"],mapper:{constraints:{InclusiveMinimum:1},serializedName:"maxresults",xmlName:"maxresults",type:{name:"Number"}}},Bn],urlParameters:[Hn],headerParameters:[Qn,Un,Ln],isXML:!0,serializer:qi};r(445);class zi{constructor(){this.read=!1,this.write=!1,this.delete=!1,this.list=!1,this.add=!1,this.create=!1,this.update=!1,this.process=!1}static parse(e){const t=new zi;for(const r of e)switch(r){case"r":t.read=!0;break;case"w":t.write=!0;break;case"d":t.delete=!0;break;case"l":t.list=!0;break;case"a":t.add=!0;break;case"c":t.create=!0;break;case"u":t.update=!0;break;case"p":t.process=!0;break;default:throw new RangeError(`Invalid permission character: ${r}`)}return t}toString(){const e=[];return this.read&&e.push("r"),this.write&&e.push("w"),this.delete&&e.push("d"),this.list&&e.push("l"),this.add&&e.push("a"),this.create&&e.push("c"),this.update&&e.push("u"),this.process&&e.push("p"),e.join("")}}class Ii{constructor(){this.service=!1,this.container=!1,this.object=!1}static parse(e){const t=new Ii;for(const r of e)switch(r){case"s":t.service=!0;break;case"c":t.container=!0;break;case"o":t.object=!0;break;default:throw new RangeError(`Invalid resource type: ${r}`)}return t}toString(){const e=[];return this.service&&e.push("s"),this.container&&e.push("c"),this.object&&e.push("o"),e.join("")}}class Ti{constructor(){this.blob=!1,this.file=!1,this.queue=!1,this.table=!1}static parse(e){const t=new Ti;for(const r of e)switch(r){case"b":t.blob=!0;break;case"f":t.file=!0;break;case"q":t.queue=!0;break;case"t":t.table=!0;break;default:throw new RangeError(`Invalid service character: ${r}`)}return t}toString(){const e=[];return this.blob&&e.push("b"),this.table&&e.push("t"),this.queue&&e.push("q"),this.file&&e.push("f"),e.join("")}}class _i extends xi{constructor(e,t,r){let s;s=t instanceof Is?t:f&&t instanceof gi||t instanceof U||yr(t)?Ts(t,r):Ts(new U,r),super(e,s),this.serviceContext=new Pi(this.storageClientContext)}static fromConnectionString(e,t){t=t||{};const r=fs(e);if("AccountConnString"===r.kind){if(f){const e=new gi(r.accountName,r.accountKey);t.proxyOptions||(t.proxyOptions=void r.proxyUri);const s=Ts(e,t);return new _i(r.url,s)}throw new Error("Account connection string is only supported in Node.js environment")}if("SASConnString"===r.kind){const e=Ts(new U,t);return new _i(r.url+"?"+r.accountSas,e)}throw new Error("Connection string must be either an Account connection string or a SAS connection string")}getQueueClient(e){return new Ri(ds(this.url,e),this.pipeline)}async listQueuesSegment(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueServiceClient-listQueuesSegment",t);""===t.prefix&&(t.prefix=void 0);try{return await this.serviceContext.listQueuesSegment({abortSignal:t.abortSignal,marker:e,maxPageSize:t.maxPageSize,prefix:t.prefix,include:void 0===t.include?void 0:[t.include],tracingOptions:s.tracingOptions})}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}listSegments(e,t={}){return As(this,arguments,(function*(){let r;""===t.prefix&&(t.prefix=void 0);do{r=yield _s(this.listQueuesSegment(e,t)),e=r.continuationToken,yield yield _s(yield _s(r))}while(e)}))}listItems(e={}){return As(this,arguments,(function*(){var t,r;""===e.prefix&&(e.prefix=void 0);try{for(var s,n=Hs(this.listSegments(void 0,e));!(s=yield _s(n.next())).done;){const e=s.value;e.queueItems&&(yield _s(yield*Ds(Hs(e.queueItems))))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=n.return)&&(yield _s(r.call(n)))}finally{if(t)throw t.error}}}))}listQueues(e={}){""===e.prefix&&(e.prefix=void 0);const t=Object.assign(Object.assign({},e),e.includeMetadata?{include:"metadata"}:{}),r=this.listItems(t);return{next:()=>r.next(),[Symbol.asyncIterator](){return this},byPage:(e={})=>this.listSegments(e.continuationToken,Object.assign({maxPageSize:e.maxPageSize},t))}}async getProperties(e={}){const{span:t,updatedOptions:r}=Ni("QueueServiceClient-getProperties",e);try{return await this.serviceContext.getProperties({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions})}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async setProperties(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueServiceClient-setProperties",t);try{return await this.serviceContext.setProperties(e,{abortSignal:t.abortSignal,tracingOptions:s.tracingOptions})}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}async getStatistics(e={}){const{span:t,updatedOptions:r}=Ni("QueueServiceClient-getStatistics",e);try{return await this.serviceContext.getStatistics({abortSignal:e.abortSignal,tracingOptions:r.tracingOptions})}catch(e){throw t.setStatus({code:Tt.ERROR,message:e.message}),e}finally{t.end()}}async createQueue(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueServiceClient-createQueue",t);try{return await this.getQueueClient(e).create(s)}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}async deleteQueue(e,t={}){const{span:r,updatedOptions:s}=Ni("QueueServiceClient-deleteQueue",t);try{return await this.getQueueClient(e).delete(s)}catch(e){throw r.setStatus({code:Tt.ERROR,message:e.message}),e}finally{r.end()}}generateAccountSasUrl(e,t=zi.parse("r"),r="sco",s={}){if(!(this.credential instanceof gi))throw RangeError("Can only generate the account SAS when the client is initialized with a shared key credential");if(void 0===e){const t=new Date;e=new Date(t.getTime()+36e5)}const n=function(e,t){const r=e.version?e.version:Rr,s=zi.parse(e.permissions.toString()).toString(),n=Ti.parse(e.services).toString(),i=Ii.parse(e.resourceTypes).toString();let a;a=r>="2020-12-06"?[t.accountName,s,n,i,e.startsOn?ys(e.startsOn,!1):"",ys(e.expiresOn,!1),e.ipRange?Si(e.ipRange):"",e.protocol?e.protocol:"",r,"",""].join("\n"):[t.accountName,s,n,i,e.startsOn?ys(e.startsOn,!1):"",ys(e.expiresOn,!1),e.ipRange?Si(e.ipRange):"",e.protocol?e.protocol:"",r,""].join("\n");const o=t.computeHMACSHA256(a);return new wi(r,o,s,n,i,e.protocol,e.startsOn,e.expiresOn,e.ipRange)}(Object.assign({permissions:t,expiresOn:e,resourceTypes:r,services:Ti.parse("q").toString()},s),this.credential).toString();return vs(this.url,n)}}},231:function(){}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){const{QueueServiceClient:e}=r(80)}()}();