<app-header class="full-width"></app-header>
<main id="content" class="js-content" role="main">
  <div class="grid-row">
    <div class="column-two-thirds">
      <header class="page-header">
          <h1 class="heading-xlarge">Give feedback</h1>
      </header>

      <div *ngIf="userSubmittedForm && comment.invalid" class="error-summary" role="alert" aria-labelledby="error-summary" tabindex="-1">
          <h2 class="heading-medium error-summary-heading" id="error-summary">
            You need to fix the error on this page before continuing
          </h2>

          <p>
            See highlighted errors below
          </p>

          <ul class="error-summary-list">
            <p *ngIf="comment.value.length === 0">
              <a href='ict-survey/feedback#feedback-comment'>Feedback comment is missing</a>
            </p>
            <p *ngIf="comment.value.length > 1200">
              <a href='ict-survey/feedback#feedback-comment'>Feedback comment limit is 1200 characters</a>
            </p>
          </ul>
      </div>

      <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
        <div class="text" [ngClass]="{'form-group-error': userSubmittedForm && comment.invalid}">
          <fieldset>
            <legend id="feedback-comment">
              <h2 class="heading-large">
                Did you encounter any problems running the connection test on your ICT?
              </h2>
              <span *ngIf="userSubmittedForm && comment.invalid" class="error-message">
                <p *ngIf="comment.value.length === 0">
                  Feedback comment is missing
                </p>
                <p *ngIf="comment.value.length > 1200">
                  Feedback comment limit is 1200 characters
                </p>
              </span>
            </legend>
            <p>
              <textarea #commentText name="commentText" class="textarea form-control" formControlName="comment" maxlength="1200"></textarea>
            </p>
            <p class="no-top-margin">(Limit is 1200 characters)</p>
          </fieldset>
        </div>

        <div>
            <h1 class="heading-large">
                Optional follow-up
            </h1>
            <p class="lede">
                If you encountered a problem and are willing to participate in further research, please provide us with your contact details. Please note, we may not be able to include all schools in the research.
            </p>
        </div>

        <div class="form-group">
          <label class="form-label" for="first-name">First name</label>
          <input class="form-control" id="first-name" name="first-name" type="text" formControlName="firstName">
        </div>

        <div class="form-group">
          <label class="form-label" for="last-name">Last name</label>
          <input class="form-control" id="last-name" name="last-name" type="text" formControlName="lastName">
        </div>

        <div class="form-group">
          <label class="form-label" for="contact-number">Contact number</label>
          <input class="form-control" id="contact-number" name="contact-number" type="text" formControlName="contactNumber">
        </div>

        <div class="form-group">
          <label class="form-label" for="email-address">Email address</label>
          <input class="form-control" id="email-address" name="email-address" type="text" formControlName="emailAddress">
        </div>

        <div class="form-group">
          <label class="form-label" for="school-name">School name (optional)</label>
          <input class="form-control" id="school-name" name="school-name" type="text" formControlName="schoolName">
        </div>

        <div class="form-group">
            <input class="button" value="Send feedback" type="submit">
        </div>
      </form>
    </div>
  </div>
</main>
